import{j as e,af as h,E as l,aH as g,H as p,y as f,q as i,a3 as j,aI as N}from"./vendor-react-NdMTiU_3.js";import{A as y,C as n,a as d,g as v,f as c,B as m}from"./dashboard-BRRSZ3Kr.js";import"./vendor-inertia-Uge9r9zn.js";import"./vendor-other-DeegM5Eu.js";import"./vendor-charts-wdNP6emn.js";const w=[{title:"Receipts",href:"/receipts"}];function V({sales:a,auth:r}){console.log("ReceiptsIndex props:",{sales:a,auth:r});const o=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=s=>(console.log("Processing sale:",s),!s.saleItems||!Array.isArray(s.saleItems)?(console.log("saleItems is undefined or not an array:",s.saleItems),0):s.saleItems.reduce((t,u)=>t+u.quantity,0));return e.jsxs(y,{breadcrumbs:w,children:[e.jsx(h,{title:"Receipts"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-lg font-bold sm:text-xl md:text-2xl",children:"Receipts"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground sm:text-base",children:"View all your sales receipts and transaction history"})]})}),e.jsx("div",{className:"space-y-4",children:!a||!a.data||a.data.length===0?e.jsx(n,{className:"text-center py-12",children:e.jsxs(d,{children:[e.jsx(l,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"No receipts found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You haven't made any sales yet. Start selling products to generate receipts."})]})}):e.jsx("div",{className:"grid gap-4",children:a.data.filter(s=>s&&s.id).map(s=>e.jsx(n,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"font-semibold text-lg",children:["Receipt #",s.id]})]}),e.jsx(v,{variant:"outline",className:"text-xs",children:r.user.role==="admin"?"Admin View":"Manager Sale"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:o(s.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:c(s.total_amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[x(s)," items"]})]})]}),r.user.role==="admin"&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Sold by: ",e.jsx("span",{className:"font-medium",children:s.manager.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Items sold:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[s.saleItems&&Array.isArray(s.saleItems)&&s.saleItems.slice(0,4).map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 dark:bg-gray-800 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.productVariant.product.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.productVariant.color&&`${t.productVariant.color}, `,t.productVariant.size&&`${t.productVariant.size}`]})]}),e.jsx("div",{className:"text-right ml-2",children:e.jsxs("p",{className:"font-medium",children:[t.quantity," Ã— ",c(t.unit_price)]})})]},t.id)),s.saleItems&&Array.isArray(s.saleItems)&&s.saleItems.length>4&&e.jsxs("div",{className:"text-sm text-muted-foreground text-center py-2",children:["+",s.saleItems.length-4," more items"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx(i,{href:`/receipts/${s.id}`,children:e.jsxs(m,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"View Receipt"]})}),e.jsx(i,{href:`/receipts/${s.id}/download`,children:e.jsxs(m,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Download"]})})]})]})})},s.id))})}),a&&a.last_page>1&&e.jsx("div",{className:"flex items-center justify-center gap-2 mt-6",children:Array.from({length:a.last_page},(s,t)=>t+1).map(s=>e.jsx(i,{href:`/receipts?page=${s}`,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${s===a.current_page?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:s},s))})]})]})}export{V as default};
