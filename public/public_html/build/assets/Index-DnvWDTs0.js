import{r as p,j as e,af as X,b5 as q,a3 as C,aB as D,a2 as N,a9 as T,a8 as _,a7 as S,aF as K,ab as z,v as t,a5 as M,a6 as U}from"./vendor-react-NdMTiU_3.js";import{A as V,B as d,C as l,b as m,d as h,a as c,I as H,g}from"./dashboard-BRRSZ3Kr.js";import{L as k,S as J,a as W,b as G,c as Q,d as u}from"./expenses-D7tWSJP3.js";import{T as Y,a as Z,b as A,c as F}from"./professional-admin-dashboard-CsvsvtDK.js";import"./vendor-inertia-Uge9r9zn.js";import"./vendor-other-DeegM5Eu.js";import"./vendor-charts-wdNP6emn.js";import"./vendor-amcharts-TYTFOCdD.js";function oe({notifications:a,categories:ee,stats:n,currentCategory:se}){const[L,R]=p.useState("unread"),[o,E]=p.useState(""),[x,I]=p.useState("all"),[j,i]=p.useState(!1),y=s=>{switch(s){case"alert-triangle":return e.jsx(T,{className:"h-5 w-5 text-yellow-500"});case"x-circle":return e.jsx(_,{className:"h-5 w-5 text-red-500"});case"trending-up":return e.jsx(S,{className:"h-5 w-5 text-green-500"});case"check-circle":return e.jsx(U,{className:"h-5 w-5 text-green-500"});case"info":return e.jsx(M,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(N,{className:"h-5 w-5 text-gray-500"})}},b=s=>{switch(s){case"success":return"border-l-green-500 bg-green-50";case"warning":return"border-l-yellow-500 bg-yellow-50";case"error":return"border-l-red-500 bg-red-50";case"info":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},v=async s=>{try{await fetch("/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({notification_id:s})}),t.reload()}catch(r){console.error("Failed to mark notification as read:",r)}},O=async()=>{i(!0);try{await fetch("/notifications/mark-all-read",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),t.reload()}catch(s){console.error("Failed to mark all notifications as read:",s)}finally{i(!1)}},B=async()=>{i(!0);try{await fetch("/notifications/sync",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),t.reload()}catch(s){console.error("Failed to sync notifications:",s)}finally{i(!1)}},P=async()=>{if(confirm("Are you sure you want to clear all notifications? This action cannot be undone.")){i(!0);try{await fetch("/notifications/clear-all",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),t.reload()}catch(s){console.error("Failed to clear all notifications:",s)}finally{i(!1)}}},w=async s=>{if(!s.action_data)return;const r=s.action_data;switch(s.is_read||await v(s.id),r.type){case"sale":r.url?window.location.href=r.url:r.id&&t.visit(`/receipts/${r.id}`);break;case"product":r.id&&t.visit(`/products/${r.id}`);break;case"low_stock":case"out_of_stock":t.visit("/admin-dashboard?tab=inventory");break;default:r.url&&(window.location.href=r.url)}},f=a.data.filter(s=>{const r=s.title.toLowerCase().includes(o.toLowerCase())||s.message.toLowerCase().includes(o.toLowerCase()),$=x==="all"||s.type===x;return r&&$});return e.jsxs(V,{breadcrumbs:[{title:"Dashboard",href:"/admin-dashboard"},{title:"Notifications",href:"/notifications"}],children:[e.jsx(X,{title:"Notifications"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor all system notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(d,{variant:"outline",onClick:B,disabled:j,children:[e.jsx(q,{className:`mr-2 h-4 w-4 ${j?"animate-spin":""}`}),"Sync"]}),e.jsxs(d,{variant:"outline",onClick:O,disabled:j||n.unread===0,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Mark All Read"]}),e.jsxs(d,{variant:"destructive",onClick:P,disabled:j,children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Clear All"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total"}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.total})})]}),e.jsxs(l,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Unread"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.unread})})]}),e.jsxs(l,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Inventory"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.inventory})})]}),e.jsxs(l,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Sales"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.sales})})]})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center",children:[e.jsx(K,{className:"mr-2 h-5 w-5"}),"Filters"]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(k,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute top-3 left-3 h-4 w-4 text-muted-foreground"}),e.jsx(H,{id:"search",placeholder:"Search notifications...",value:o,onChange:s=>E(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(k,{htmlFor:"type-filter",children:"Type"}),e.jsxs(J,{value:x,onValueChange:I,children:[e.jsx(W,{children:e.jsx(G,{placeholder:"Filter by type"})}),e.jsxs(Q,{children:[e.jsx(u,{value:"all",children:"All Types"}),e.jsx(u,{value:"success",children:"Success"}),e.jsx(u,{value:"warning",children:"Warning"}),e.jsx(u,{value:"error",children:"Error"}),e.jsx(u,{value:"info",children:"Info"})]})]})]})]})})]}),e.jsxs(Y,{value:L,onValueChange:R,children:[e.jsxs(Z,{className:"grid w-full grid-cols-2",children:[e.jsxs(A,{value:"unread",children:["Unread (",n.unread,")"]}),e.jsxs(A,{value:"read",children:["Read (",n.total-n.unread,")"]})]}),e.jsx(F,{value:"unread",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[f.filter(s=>!s.is_read).map(s=>e.jsx(l,{className:`cursor-pointer transition-all hover:shadow-md ${s.is_read?"opacity-75":""} ${b(s.type)}`,onClick:()=>w(s),children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-start space-x-3",children:[y(s.icon),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),!s.is_read&&e.jsx(g,{variant:"secondary",className:"text-xs",children:"New"}),e.jsx(g,{variant:"outline",className:"text-xs",children:s.type})]}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:s.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.jsx("span",{children:new Date(s.created_at).toLocaleString()}),s.is_read&&s.read_by&&e.jsxs("span",{children:["Read by ",s.read_by.name]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:!s.is_read&&e.jsx(d,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),v(s.id)},children:e.jsx(C,{className:"h-4 w-4"})})})]})})},s.id)),f.filter(s=>!s.is_read).length===0&&e.jsx(l,{children:e.jsxs(c,{className:"p-8 text-center",children:[e.jsx(N,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-medium",children:"No unread notifications"}),e.jsx("p",{className:"text-muted-foreground",children:o||x!=="all"?"Try adjusting your filters":"All caught up! No unread notifications."})]})})]})}),e.jsx(F,{value:"read",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[f.filter(s=>s.is_read).map(s=>e.jsx(l,{className:`cursor-pointer opacity-75 transition-all hover:shadow-md ${b(s.type)}`,onClick:()=>w(s),children:e.jsx(c,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex flex-1 items-start space-x-3",children:[y(s.icon),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx(g,{variant:"outline",className:"text-xs",children:s.type})]}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:s.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.jsx("span",{children:new Date(s.created_at).toLocaleString()}),s.read_by&&e.jsxs("span",{children:["Read by ",s.read_by.name]})]})]})]})})})},s.id)),f.filter(s=>s.is_read).length===0&&e.jsx(l,{children:e.jsxs(c,{className:"p-8 text-center",children:[e.jsx(N,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-medium",children:"No read notifications"}),e.jsx("p",{className:"text-muted-foreground",children:o||x!=="all"?"Try adjusting your filters":"No read notifications yet."})]})})]})})]}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(a.current_page-1)*a.per_page+1," to"," ",Math.min(a.current_page*a.per_page,a.total)," of ",a.total," ","notifications"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:a.current_page===1,onClick:()=>t.get("/notifications",{page:a.current_page-1}),children:"Previous"}),e.jsxs("span",{className:"text-sm",children:["Page ",a.current_page," of ",a.last_page]}),e.jsx(d,{variant:"outline",size:"sm",disabled:a.current_page===a.last_page,onClick:()=>t.get("/notifications",{page:a.current_page+1}),children:"Next"})]})]})]})]})}export{oe as default};
