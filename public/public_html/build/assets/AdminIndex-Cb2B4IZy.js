import{r as p,ay as T,j as e,af as D,q as g,ba as _,H as j,E as M,U as m,a6 as S}from"./vendor-react-NdMTiU_3.js";import{T as k,A,B as n,C as B,b as E,d as F,e as O,a as H,g as I,f as c,D as L,h as W,i as R,j as q,m as z,I as K,k as U}from"./dashboard-BRRSZ3Kr.js";import{K as o,L as f,T as $}from"./expenses-D7tWSJP3.js";import"./vendor-inertia-Uge9r9zn.js";import"./vendor-other-DeegM5Eu.js";import"./vendor-charts-wdNP6emn.js";function Z({managers:t}){t.reduce((s,a)=>s+a.wallet.balance,0),t.reduce((s,a)=>s+a.wallet.total_earned,0);const b=t.reduce((s,a)=>s+a.wallet.total_paid_out,0),y=t.reduce((s,a)=>s+a.expected_commission,0),[N,i]=p.useState(!1),[l,d]=p.useState(null),{data:x,setData:r,post:v,processing:h,errors:u}=T({amount:"",notes:""}),w=[{title:"Manager Wallets",href:"/wallets"}],C=s=>{d(s),r({amount:s.wallet.balance.toString(),notes:""}),i(!0)},P=s=>{s.preventDefault(),l&&v(`/wallets/${l.id}/payout`,{onSuccess:()=>{i(!1),d(null),r({amount:"",notes:""})}})};return e.jsx(k,{children:e.jsxs(A,{breadcrumbs:w,children:[e.jsx(D,{title:"Manager Wallets"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 sm:gap-6 overflow-x-auto rounded-xl p-3 sm:p-4 bg-gray-50 pb-24 sm:pb-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Manager Wallets"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Monitor manager earnings and process payouts"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto",children:e.jsx(g,{href:"/commission-rates",className:"w-full sm:w-auto",children:e.jsxs(n,{variant:"outline",className:"w-full",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Commission Rates"]})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(o,{title:"Pending Commission",value:y,change:15,changeType:"increase",icon:j,color:"blue",bgColor:"bg-blue-800",tooltip:"Total amount of commission that managers have earned and is ready to be processed for payout. This represents the total expected commission based on current sales."}),e.jsx(o,{title:"Total Sales",value:t.reduce((s,a)=>s+a.total_sales,0),change:25,changeType:"increase",icon:M,color:"green",bgColor:"bg-green-800",tooltip:"Combined sales value generated by all active managers in the system. This is the total revenue generated across all manager accounts."}),e.jsx(o,{title:"Active Managers",value:t.length,change:8,changeType:"increase",icon:m,color:"purple",bgColor:"bg-purple-800",format:"number",tooltip:"Number of managers currently active in the system and managing sales operations. Each manager can earn commission based on their sales performance."}),e.jsx(o,{title:"Total Paid Out",value:b,change:12,changeType:"increase",icon:S,color:"orange",bgColor:"bg-orange-800",tooltip:"Total amount of commission that has been paid out to managers through withdrawals or payouts. This represents the cumulative payout history."})]}),e.jsxs(B,{className:"bg-white border-0 shadow-sm",children:[e.jsxs(E,{className:"pb-3 sm:pb-4",children:[e.jsxs(F,{className:"text-lg sm:text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Manager Overview"]}),e.jsx(O,{className:"text-gray-600",children:"Process payouts and manage commission for each manager"})]}),e.jsx(H,{children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ‘¥"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Managers Found"}),e.jsx("p",{className:"text-gray-500 text-sm max-w-sm",children:"Manager accounts will appear here once they are added to the system"})]}):t.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(m,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 text-xs text-gray-500 mt-1",children:[e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("span",{className:"truncate",children:s.email})}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs(I,{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-800",children:[s.sales_count," sales"]})}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{className:"truncate",children:[c(s.total_sales)," total"]})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:c(s.expected_commission)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Pending"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:c(s.wallet.balance)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Balance"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[s.expected_commission>0&&e.jsxs(n,{size:"sm",onClick:()=>C(s),className:"h-7 px-2 text-xs bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Pay"})]}),e.jsx(g,{href:`/wallets/${s.id}`,children:e.jsxs(n,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",children:[e.jsx("span",{className:"hidden sm:inline",children:"Details"}),e.jsx("span",{className:"sm:hidden",children:"View"})]})})]})]})]},s.id))})})]})]}),e.jsx(L,{open:N,onOpenChange:i,children:e.jsxs(W,{children:[e.jsxs(R,{children:[e.jsx(q,{children:"Process Payout"}),e.jsxs(z,{children:["Process a payout for ",l?.name]})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"amount",children:"Amount"}),e.jsx(K,{id:"amount",type:"number",step:"0.01",min:"0.01",max:l?.wallet.balance||0,value:x.amount,onChange:s=>r("amount",s.target.value),required:!0}),u.amount&&e.jsx("p",{className:"text-sm text-red-600",children:u.amount}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Available balance: ",c(l?.wallet.balance||0)]})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx($,{id:"notes",value:x.notes,onChange:s=>r("notes",s.target.value),placeholder:"Add any notes about this payout..."})]}),e.jsxs(U,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(n,{type:"submit",disabled:h,children:h?"Processing...":"Process Payout"})]})]})]})})]})})}export{Z as default};
