import{r as m,j as e,aP as ae,aQ as le,aR as re,aS as pe,u as U,af as fe,a9 as L,q as R,X as B,H as je,aw as Ne,y as z,a7 as ve,N as ye,aD as be,aE as we,aT as Se,K as q,aH as ke,v as I,U as Ce,aU as Te}from"./vendor-react-NdMTiU_3.js";import{c as $,A as Pe,B as C,C as S,b as T,d as P,a as k,f as v,g as A}from"./dashboard-BRRSZ3Kr.js";import{K as V,S as J,a as G,b as Q,c as Z,d as X}from"./expenses-D7tWSJP3.js";import{R as ne,A as ie,P as Fe,p as Ae,a as Oe,X as Ee,C as Me,b as De,V as Le,c as Re,d as ee,e as u,L as se,f as Be,T as ze,g as Ie,h as te}from"./vendor-amcharts-TYTFOCdD.js";import{C as Ve,b as He,L as _e,P as Xe,c as $e,d as Ye,p as We,a as Ke,i as Ue}from"./vendor-charts-wdNP6emn.js";import"./vendor-inertia-Uge9r9zn.js";import"./vendor-other-DeegM5Eu.js";const qe=pe,ce=m.forwardRef(({className:t,...i},c)=>e.jsx(ae,{ref:c,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i}));ce.displayName=ae.displayName;const O=m.forwardRef(({className:t,...i},c)=>e.jsx(le,{ref:c,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i}));O.displayName=le.displayName;const E=m.forwardRef(({className:t,...i},c)=>e.jsx(re,{ref:c,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i}));E.displayName=re.displayName;Ve.register(He,_e,Xe,$e,Ye,We,Ke,Ue);const Je=[{title:"Admin Dashboard",href:"/admin-dashboard"}];function H({title:t,value:i,change:c,changeType:n,icon:g}){const l=n==="increase";return e.jsx(S,{className:"bg-white border-0 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(k,{className:"p-2 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"block sm:hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-xs text-gray-600 leading-tight",children:t})}),e.jsx(g,{className:"h-4 w-4 text-gray-400 flex-shrink-0 ml-1"})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 leading-tight break-words",children:v(i)}),e.jsxs("span",{className:`text-xs font-medium ${l?"text-green-600":"text-red-600"}`,children:[l?"+":"",c,"%"]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-1",children:v(i)}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 lg:mb-3",children:t}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:`text-sm font-medium ${l?"text-green-600":"text-red-600"}`,children:[l?"+":"",c,"% vs Last Month"]})})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx(g,{className:"h-7 w-7 lg:h-8 lg:w-8 text-gray-400"})})]})]})})}function Ge({data:t,onExport:i}){const[c,n]=m.useState(null);if(t.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",style:{height:"300px"},children:[e.jsx("div",{className:"text-6xl mb-4",children:"📈"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Sales Data"}),e.jsx("p",{className:"text-gray-500 text-sm max-w-sm",children:"Sales and purchase data will appear here once you start recording transactions."})]});m.useEffect(()=>{i&&c&&i(c)},[c,i]);const g={labels:t.map(r=>r.time),datasets:[{label:"Total Purchase",data:t.map(r=>r.purchase||0),borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:4,fill:!0,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#FFFFFF",pointBorderWidth:3,pointRadius:6,pointHoverRadius:8,pointHoverBackgroundColor:"#3B82F6",pointHoverBorderColor:"#FFFFFF",pointHoverBorderWidth:4,gradient:{backgroundColor:{type:"linear",x0:0,y0:0,x1:0,y1:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.3)"},{offset:1,color:"rgba(59, 130, 246, 0.05)"}]}}},{label:"Total Sales",data:t.map(r=>r.sales||0),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:4,fill:!0,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#FFFFFF",pointBorderWidth:3,pointRadius:6,pointHoverRadius:8,pointHoverBackgroundColor:"#10B981",pointHoverBorderColor:"#FFFFFF",pointHoverBorderWidth:4,gradient:{backgroundColor:{type:"linear",x0:0,y0:0,x1:0,y1:1,colorStops:[{offset:0,color:"rgba(16, 185, 129, 0.3)"},{offset:1,color:"rgba(16, 185, 129, 0.05)"}]}}}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},layout:{padding:{left:10,right:10,top:10,bottom:10}},plugins:{legend:{position:"top",align:"center",labels:{usePointStyle:!0,pointStyle:"circle",padding:20,font:{size:14,family:"Inter, sans-serif",weight:"bold"},color:"#374151"}},tooltip:{backgroundColor:"rgba(31, 41, 55, 0.95)",titleColor:"#D1D5DB",bodyColor:"#FFFFFF",borderColor:"#374151",borderWidth:1,cornerRadius:12,displayColors:!0,padding:12,titleFont:{size:13,weight:"normal"},bodyFont:{size:14,weight:"bold"},callbacks:{label:function(r){const h=r.parsed.y;return`${r.dataset.label}: Ksh ${h.toLocaleString()}`}}}},scales:{x:{display:!0,grid:{display:!0,color:"#F3F4F6",drawBorder:!1},ticks:{color:"#6B7280",font:{size:13,family:"Inter, sans-serif",weight:"normal"}}},y:{display:!0,grid:{display:!0,color:"#F3F4F6",drawBorder:!1},ticks:{color:"#6B7280",font:{size:13,family:"Inter, sans-serif",weight:"normal"},callback:function(r){return r.toLocaleString()}}}},elements:{line:{borderCapStyle:"round"},point:{hoverBackgroundColor:"#FFFFFF"}},animation:{duration:1e3,easing:"easeInOutQuart"}};return e.jsx("div",{className:"w-full",style:{height:"300px",position:"relative"},children:e.jsx(Te,{ref:r=>n(r),data:g,options:l})})}function Qe({data:t}){const[i,c]=m.useState(null);return m.useEffect(()=>{if(!i)return;const n=ne.new(i);n.setThemes([ie.new(n)]);const l=n.container.children.push(Fe.new(n,{layout:n.verticalLayout,innerRadius:Ae(50)})).series.push(Oe.new(n,{valueField:"sales",categoryField:"name",alignLabels:!1}));return l.labels.template.setAll({forceHidden:!0}),l.ticks.template.setAll({forceHidden:!0}),l.data.setAll(t.categories),()=>{n.dispose()}},[i,t]),e.jsx("div",{ref:c,style:{width:"180px",height:"180px"}})}function Ze({data:t}){const[i,c]=m.useState(null),[n,g]=m.useState("column");return m.useEffect(()=>{if(!i)return;let l=null;try{l=ne.new(i),l.setThemes([ie.new(l)]);const r=l.container.children.push(Ee.new(l,{panX:!1,panY:!1,wheelX:"panX",wheelY:"zoomX",layout:l.verticalLayout,paddingLeft:0,paddingRight:0})),h=r.xAxes.push(Me.new(l,{categoryField:"time",renderer:De.new(l,{cellStartLocation:.1,cellEndLocation:.9,minGridDistance:40})}));h.get("renderer").labels.template.setAll({rotation:-45,centerX:0,centerY:0,fontSize:11});const p=r.yAxes.push(Le.new(l,{renderer:Re.new(l,{minGridDistance:30})})),w=t.length>0?t.map(a=>({...a,sales:a.sales||0,expenses:-(a.purchase||0)})):[];let f,y;n==="column"?(f=r.series.push(ee.new(l,{name:"Sales",xAxis:h,yAxis:p,valueYField:"sales",categoryXField:"time",fill:u("#14b8a6"),stroke:u("#14b8a6")})),y=r.series.push(ee.new(l,{name:"Expenses",xAxis:h,yAxis:p,valueYField:"expenses",categoryXField:"time",fill:u("#f97316"),stroke:u("#f97316")}))):(f=r.series.push(se.new(l,{name:"Sales",xAxis:h,yAxis:p,valueYField:"sales",categoryXField:"time",stroke:u("#14b8a6"),fill:u("#14b8a6"),fillOpacity:.2})),y=r.series.push(se.new(l,{name:"Expenses",xAxis:h,yAxis:p,valueYField:"expenses",categoryXField:"time",stroke:u("#f97316"),fill:u("#f97316"),fillOpacity:.2}))),h.data.setAll(w),f.data.setAll(w),y.data.setAll(w),r.set("cursor",Be.new(l,{}));const b=r.set("tooltip",ze.new(l,{getFillFromSprite:!1,autoTextColor:!1,getStrokeFromSprite:!1,getLabelFillFromSprite:!1,pointerOrientation:"horizontal",getPointerOrientation:"horizontal"}));b.label&&b.label.setAll({fill:u("#ffffff"),fontSize:12,fontWeight:"500"}),b.background&&b.background.setAll({fill:u("#1f2937"),stroke:u("#374151"),strokeWidth:1,cornerRadius:6,shadowColor:u("#000000"),shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2,shadowOpacity:.3}),f.set("tooltipText","{name}: {valueY.formatNumber('#,###.00')}"),y.set("tooltipText","{name}: {valueY.formatNumber('#,###.00')}"),r.children.push(Ie.new(l,{centerX:te,x:te,marginTop:15,marginBottom:15})).data.setAll([f,y])}catch(r){console.error("Error initializing SalesExpensesChart:",r)}return()=>{l&&l.dispose()}},[i,t,n]),t.length===0?e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📊"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-gray-500 text-sm max-w-sm",children:"Sales and expenses data will appear here once you start recording transactions."})]}),e.jsx("div",{className:"h-20 sm:h-0"})]}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 hidden sm:block",children:"Chart Type"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>g("column"),className:`flex-1 sm:flex-none px-3 py-1 text-xs rounded-md transition-colors ${n==="column"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Column"}),e.jsx("span",{className:"sm:hidden",children:"📊"})]}),e.jsxs("button",{onClick:()=>g("line"),className:`flex-1 sm:flex-none px-3 py-1 text-xs rounded-md transition-colors ${n==="line"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Line"}),e.jsx("span",{className:"sm:hidden",children:"📈"})]})]})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("div",{ref:c,style:{width:"100%",height:"300px",minHeight:"250px"},className:"chart-container"})}),e.jsx("div",{className:"flex justify-center mt-4 sm:hidden",children:e.jsxs("div",{className:"flex space-x-4 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-teal-500 rounded mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Sales"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Expenses"})]})]})}),e.jsx("div",{className:"h-20 sm:h-0"})]})}function es({data:t}){const i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],c=["8 AM","10 AM","12 PM","2 PM","4 PM","6 PM","8 PM","10 PM"],[n,g]=m.useState(null),[l,r]=m.useState({x:0,y:0});console.log("Order Statistics Data:",t),console.log("Data length:",t?.length),t&&t.length>0&&(console.log("Sample data item:",t[0]),console.log("Available hours in data:",[...new Set(t.map(a=>a.hour))]),console.log("Available days in data:",[...new Set(t.map(a=>a.day))]));const h=t?.map(a=>({...a,hour:{"8 Am":"8 AM","10 Am":"10 AM","12 Am":"12 PM","14 Pm":"2 PM","16 Pm":"4 PM","18 Pm":"6 PM","20 Pm":"8 PM","22 Pm":"10 PM"}[a.hour]||a.hour}))||[],p=a=>{switch(a){case"high":return"bg-orange-600";case"medium":return"bg-orange-400";case"low":return"bg-orange-200";case"none":return"bg-gray-100";default:return"bg-gray-100"}},w=a=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),f=(a,j,d)=>{g({day:a,hour:j}),r({x:d.clientX,y:d.clientY})},y=()=>{g(null)},b=a=>{r({x:a.clientX,y:a.clientY})},M=()=>{if(!n)return null;const a=h.find(d=>d.day===n.day&&d.hour===n.hour);if(!a||a.orders===0)return e.jsxs("div",{className:"bg-gray-800 text-white p-2 rounded shadow-lg text-xs",children:[e.jsxs("div",{className:"font-semibold",children:[n.day," ",n.hour]}),e.jsx("div",{children:"No sales recorded"})]});const j=a.intensity==="high"?"High Activity":a.intensity==="medium"?"Medium Activity":a.intensity==="low"?"Low Activity":"No Activity";return e.jsxs("div",{className:"bg-gray-800 text-white p-3 rounded shadow-lg text-xs min-w-[200px]",children:[e.jsxs("div",{className:"font-semibold text-orange-300 mb-1",children:[n.day," ",n.hour]}),e.jsxs("div",{className:"mb-1",children:[a.orders," ",a.orders===1?"order":"orders"]}),e.jsx("div",{className:"mb-1 text-orange-200",children:j}),e.jsxs("div",{className:"mb-1",children:["Total: ",w(a.total_amount||0)]}),e.jsxs("div",{className:"mb-1",children:["Avg: ",w(a.avg_amount||0)]}),e.jsxs("div",{children:["Items: ",a.items_sold||0]})]})};return!h||h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📊"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Order Data"}),e.jsx("p",{className:"text-gray-500 text-sm max-w-sm",children:"Order statistics will appear here once you start recording sales."}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400",children:["Debug: Data length = ",h?.length||0]})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"grid grid-cols-8 gap-1",children:[e.jsx("div",{}),i.map(a=>e.jsx("div",{className:"text-xs sm:text-sm text-center font-medium text-gray-600",children:a},a)),c.map(a=>e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 pr-1 sm:pr-2 text-right sm:text-left",children:a}),i.map(j=>{const d=h.find(x=>x.day===j&&x.hour===a);return e.jsx("div",{className:`w-4 h-4 sm:w-6 sm:h-6 rounded-sm ${p(d?.intensity||"none")} hover:opacity-80 cursor-pointer transition-all duration-200 hover:scale-105`,onMouseEnter:x=>f(j,a,x),onMouseLeave:y,onMouseMove:b},`${j}-${a}`)})]},a))]}),n&&e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:l.x+10,top:l.y-10},children:M()})]})}function ss(){const{analytics:t,flash:i}=U().props,[c,n]=m.useState("1M"),[g,l]=m.useState(U().props.chartPeriod||"1M"),[r,h]=m.useState(null),[p,w]=m.useState(()=>typeof window<"u"?JSON.parse(localStorage.getItem("dismissedLowStock")||"[]"):[]),[f,y]=m.useState(()=>typeof window<"u"?JSON.parse(localStorage.getItem("dismissedOutOfStock")||"[]"):[]),[b,M]=m.useState(()=>typeof window<"u"?JSON.parse(localStorage.getItem("dismissedExpenses")||"[]"):[]),a={kpi:{totalSales:{value:0,change:0,changeType:"increase"},totalOrders:{value:0,change:0,changeType:"increase"},totalPurchase:{value:0,change:0,changeType:"increase"},totalInventoryValue:{value:0,change:0,changeType:"increase"}},financial:{grossProfit:{value:0,change:0,changeType:"increase"},netProfit:{value:0,change:0,changeType:"increase"},averageOrderValue:{value:0,change:0,changeType:"increase"},totalExpenses:{value:0,change:0,changeType:"increase"}},recentSales:[],topProducts:[],categories:{categories:[],totalCategories:0,totalProducts:0},orderStatistics:[],lowStockAlerts:[],salesPurchaseChartData:[],chartTotals:{totalSales:0,totalPurchase:0}},j=t?.professional||a,{kpi:d,financial:x,recentSales:oe,topProducts:de,categories:D,orderStatistics:me,lowStockAlerts:Y,salesPurchaseChartData:_,chartTotals:W}=j,F={lowStock:Y.length,outOfStock:t?.professional?.outOfStockAlerts?.length||0,pendingExpenses:t?.professional?.recentExpenses?.filter(s=>s.status==="pending").length||0},xe=F.lowStock+F.outOfStock+F.pendingExpenses,he=_&&_.length>0?_:[],K=s=>{n(s),I.get("/admin-dashboard",{period:s},{preserveState:!0,preserveScroll:!0})},ge=()=>{if(r){const s=r.canvas,o=document.createElement("a");o.download=`sales-purchase-chart-${new Date().toISOString().split("T")[0]}.png`,o.href=s.toDataURL("image/png",1),o.click()}},ue=s=>{I.get(`/receipts/${s}`)};return e.jsxs(Pe,{breadcrumbs:Je,alertCounts:{lowStock:F.lowStock,outOfStock:F.outOfStock,pendingExpenses:F.pendingExpenses,total:xe},analytics:t,children:[e.jsx(fe,{title:"Admin Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 sm:gap-6 overflow-x-auto rounded-xl p-3 sm:p-4 bg-gray-50 pb-24 sm:pb-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Welcome, Admin"})}),e.jsxs("div",{className:"space-y-3",children:[Y.filter(s=>!p.includes(s.id)).slice(0,2).map((s,o)=>e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 rounded-r-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 text-orange-500 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-orange-800 text-sm font-medium",children:[s.name," - ",s.quantity," units left"]}),e.jsx(R,{href:"/products",className:"text-orange-600 hover:underline text-xs",children:"Add Stock"})]})]}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{const N=[...p,s.id];w(N),localStorage.setItem("dismissedLowStock",JSON.stringify(N))},children:e.jsx(B,{className:"h-3 w-3"})})]},`low-stock-${s.id}`)),t?.professional?.outOfStockAlerts?.filter(s=>!f.includes(s.id))?.slice(0,2)?.map((s,o)=>e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 rounded-r-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 text-red-500 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-800 text-sm font-medium",children:[s.name," - Out of stock"]}),e.jsx(R,{href:"/products",className:"text-red-600 hover:underline text-xs",children:"Restock Now"})]})]}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{const N=[...f,s.id];y(N),localStorage.setItem("dismissedOutOfStock",JSON.stringify(N))},children:e.jsx(B,{className:"h-3 w-3"})})]},`out-of-stock-${s.id}`)),t?.professional?.recentExpenses?.filter(s=>s.status==="pending"&&!b.includes(s.id))?.slice(0,2)?.map((s,o)=>e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-yellow-800 text-sm font-medium",children:[s.title," - Ksh ",s.amount.toLocaleString()]}),e.jsx(R,{href:"/expenses",className:"text-yellow-600 hover:underline text-xs",children:"Review Expense"})]})]}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{const N=[...b,s.id];M(N),localStorage.setItem("dismissedExpenses",JSON.stringify(N))},children:e.jsx(B,{className:"h-3 w-3"})})]},`expense-${s.id}`))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[e.jsx(V,{title:"Total Sales",value:d.totalSales.value,change:d.totalSales.change,changeType:d.totalSales.changeType,icon:je,color:"orange",bgColor:"bg-orange-800",tooltip:"Total revenue generated from all completed sales transactions. This includes the sum of all items sold to customers."}),e.jsx(V,{title:"Total Orders",value:d.totalOrders.value,change:d.totalOrders.change,changeType:d.totalOrders.changeType,icon:Ne,color:"blue",bgColor:"bg-blue-800",format:"number",tooltip:"Total number of completed sales transactions. Each order represents a single customer purchase containing one or more items."}),e.jsx(V,{title:"Total Purchase",value:d.totalPurchase.value,change:d.totalPurchase.change,changeType:d.totalPurchase.changeType,icon:z,color:"green",bgColor:"bg-green-800",tooltip:"Total amount spent on purchasing inventory items from suppliers. This represents your cost of goods sold."}),e.jsx(V,{title:"Total Inventory Value",value:d.totalInventoryValue.value,change:d.totalInventoryValue.change,changeType:d.totalInventoryValue.changeType,icon:ve,color:"blue",bgColor:"bg-gray-900",tooltip:"Current value of all inventory items in stock, calculated using the cost price × quantity for each product."})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 lg:gap-6",children:[e.jsx(H,{title:"Gross Profit",value:x.grossProfit.value,change:x.grossProfit.change,changeType:x.grossProfit.changeType,icon:ye}),e.jsx(H,{title:"Net Profit",value:x.netProfit.value,change:x.netProfit.change,changeType:x.netProfit.changeType,icon:be}),e.jsx(H,{title:"Average Order Value",value:x.averageOrderValue.value,change:x.averageOrderValue.change,changeType:x.averageOrderValue.changeType,icon:we}),e.jsx(H,{title:"Total Expenses",value:x.totalExpenses.value,change:x.totalExpenses.change,changeType:x.totalExpenses.changeType,icon:Se})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"lg:col-span-2 w-full",children:e.jsxs(S,{className:"w-full",children:[e.jsxs(T,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs(P,{className:"flex items-center",children:[e.jsx(q,{className:"h-5 w-5 mr-2"}),"Sales & Purchase (Ksh)"]}),e.jsxs("div",{className:"hidden sm:flex gap-2",children:[["1D","1W","1M","3M","6M","1Y"].map(s=>e.jsx(C,{variant:c===s?"default":"outline",size:"sm",onClick:()=>K(s),className:c===s?"bg-orange-500":"",children:s},s)),e.jsxs(C,{variant:"outline",size:"sm",onClick:ge,className:"flex items-center gap-2",title:"Export Chart as Image",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]}),e.jsx("div",{className:"sm:hidden w-full",children:e.jsxs(J,{value:c,onValueChange:K,children:[e.jsx(G,{className:"w-full",children:e.jsx(Q,{placeholder:"Select period"})}),e.jsx(Z,{children:["1D","1W","1M","3M","6M","1Y"].map(s=>e.jsx(X,{value:s,children:s},s))})]})})]}),e.jsxs(k,{className:"w-full overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full flex-shrink-0"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Total Purchase: "}),e.jsx("span",{className:"sm:hidden",children:"Purchase: "}),v(W?.totalPurchase||0)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-300 rounded-full flex-shrink-0"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Total Sales: "}),e.jsx("span",{className:"sm:hidden",children:"Sales: "}),v(W?.totalSales||0)]})]})]}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx("div",{className:"min-w-[300px] w-full",children:e.jsx(Ge,{data:he,onExport:h})})})]})]})}),e.jsx("div",{children:e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 mr-2"}),"Recent Sales"]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>I.get("/sales"),className:"text-orange-600 border-orange-200 hover:bg-orange-50 hover:border-orange-300",children:"View More"})]})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:oe.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>ue(s.id),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:s.items&&s.items.length>0?e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-orange-600",children:s.items[0].product_name.charAt(0).toUpperCase()})}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"?"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Receipt #",s.id]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.date}),e.jsxs("p",{className:"text-xs text-gray-400 truncate",children:[s.items&&s.items.length>0?s.items[0].product_name:"Unknown Product",s.items_count>1&&` +${s.items_count-1} more`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:v(s.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:s.items&&s.items.length>0&&e.jsxs("span",{children:[s.items.reduce((o,N)=>o+N.quantity,0)," items"]})})]})]},s.id))})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{children:e.jsxs(S,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between",children:[e.jsxs(P,{className:"flex items-center",children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Top Products"]}),e.jsx(R,{href:"/products",className:"text-sm text-blue-600 hover:underline",children:"View All"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:de.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-orange-700",children:s.initials})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:[e.jsxs("span",{className:"hidden sm:inline",children:[s.sku," • "]}),e.jsx("span",{className:"sm:hidden",children:s.sku}),e.jsxs("span",{className:"sm:hidden block",children:[s.total_quantity," sold"]}),e.jsxs("span",{className:"hidden sm:inline",children:[s.total_quantity," sold"]})]})]})]}),e.jsx("div",{className:"text-right ml-2 flex-shrink-0",children:e.jsx("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:v(s.total_revenue)})})]},s.id))})})]})}),e.jsx("div",{children:e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(P,{className:"flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 mr-2"}),"Top Categories"]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Qe,{data:D})}),e.jsxs("div",{className:"flex-1 w-full space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Categories"}),D.categories.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 flex-shrink-0 ${o===0?"bg-orange-500":o===1?"bg-blue-600":"bg-orange-300"}`}),e.jsx("span",{className:"text-gray-600 truncate",children:s.name})]}),e.jsxs("span",{className:"font-medium text-gray-900 ml-2 flex-shrink-0",children:[s.sales," Sales"]})]},o))]}),e.jsxs("div",{className:"pt-3 border-t border-gray-100 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600 truncate",children:"Total Categories"})]}),e.jsx("span",{className:"font-medium text-gray-900 ml-2 flex-shrink-0",children:D.totalCategories})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600 truncate",children:"Total Products"})]}),e.jsx("span",{className:"font-medium text-gray-900 ml-2 flex-shrink-0",children:D.totalProducts})]})]})]})]})})]})}),e.jsx("div",{children:e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(P,{className:"flex items-center text-sm sm:text-base",children:[e.jsx(q,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Order Statistics (7 Days)"]})}),e.jsx(k,{className:"overflow-x-auto",children:e.jsx(es,{data:me})})]})})]}),e.jsxs("div",{className:"col-span-full grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 mb-6 sm:mb-0",children:[e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs(P,{className:"flex items-center",children:[e.jsx(L,{className:"h-5 w-5 mr-2 text-red-500"}),"Sales Statistics"]}),e.jsxs(J,{value:g,onValueChange:s=>{l(s),I.get("/admin-dashboard",{period:s},{preserveState:!0})},children:[e.jsx(G,{className:"w-full sm:w-24",children:e.jsx(Q,{placeholder:"Select period"})}),e.jsxs(Z,{children:[e.jsx(X,{value:"1W",children:"Weekly"}),e.jsx(X,{value:"1M",children:"1 Month"})]})]})]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600 truncate",children:v(t?.professional?.kpi?.totalSales?.value||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"})]}),e.jsx("div",{className:"flex items-center ml-2",children:e.jsx(A,{className:"bg-green-100 text-green-800 text-xs",children:"25%"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600 truncate",children:v(t?.professional?.financial?.totalExpenses?.value||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Expense"})]}),e.jsx("div",{className:"flex items-center ml-2",children:e.jsx(A,{className:"bg-red-100 text-red-800 text-xs",children:"25%"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Monthly Overview"}),e.jsx(Ze,{data:t?.professional?.salesPurchaseChartData||[]})]})]})})]}),e.jsxs(S,{className:"h-fit",children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs(P,{className:"flex items-center text-lg",children:[e.jsx(L,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-orange-500"}),e.jsx("span",{className:"text-base sm:text-lg",children:"Recent Transactions"})]}),e.jsx(C,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-200 hover:bg-orange-50 text-xs sm:text-sm w-fit",children:"View All"})]})}),e.jsx(k,{className:"pt-0 pb-6 sm:pb-6",children:e.jsxs(qe,{defaultValue:"sale",className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-2 sm:grid-cols-4 mb-4 sm:mb-6 h-auto",children:[e.jsx(O,{value:"sale",className:"text-xs sm:text-sm py-2 px-2 sm:px-3",children:"Sales"}),e.jsx(O,{value:"low-stock",className:"text-xs sm:text-sm py-2 px-2 sm:px-3",children:"Low Stock"}),e.jsx(O,{value:"out-of-stock",className:"text-xs sm:text-sm py-2 px-2 sm:px-3",children:"Out of Stock"}),e.jsx(O,{value:"expenses",className:"text-xs sm:text-sm py-2 px-2 sm:px-3",children:"Expenses"})]}),e.jsx(E,{value:"sale",className:"mt-0",children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t?.professional?.recentSales?.slice(0,4).map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs sm:text-sm font-medium text-blue-600",children:s.customer?.name?.charAt(0)||"S"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:s.customer?.name||`Sale #${s.id}`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["#",s.id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:v(s.amount||s.total||0)}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:s.date})]}),e.jsxs(A,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200 text-xs",children:[e.jsx("span",{className:"hidden sm:inline",children:"Completed"}),e.jsx("span",{className:"sm:hidden",children:"✓"})]})]})]},o))})}),e.jsx(E,{value:"low-stock",className:"mt-0",children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t?.professional?.lowStockAlerts?.slice(0,4).map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",s.sku]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:[s.quantity," units"]}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Low stock"})]}),e.jsxs(A,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 text-xs",children:[e.jsx("span",{className:"hidden sm:inline",children:"Low Stock"}),e.jsx("span",{className:"sm:hidden",children:"⚠"})]})]})]},o))})}),e.jsx(E,{value:"out-of-stock",className:"mt-0",children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t?.professional?.outOfStockAlerts?.slice(0,4).map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",s.sku]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:"0 units"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Out of stock"})]}),e.jsxs(A,{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200 text-xs",children:[e.jsx("span",{className:"hidden sm:inline",children:"Out of Stock"}),e.jsx("span",{className:"sm:hidden",children:"❌"})]})]})]},o))})}),e.jsx(E,{value:"expenses",className:"mt-0",children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:t?.professional?.recentExpenses&&t.professional.recentExpenses.length>0?t.professional.recentExpenses.slice(0,4).map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs sm:text-sm font-medium text-purple-600",children:s.title?.charAt(0)||"E"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.category," • ",s.added_by]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:v(s.amount)}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:s.date})]}),e.jsxs(A,{variant:"secondary",className:"bg-purple-100 text-purple-800 border-purple-200 text-xs",children:[e.jsx("span",{className:"hidden sm:inline",children:s.status}),e.jsx("span",{className:"sm:hidden",children:"$"})]})]})]},o)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"💰"}),e.jsx("p",{className:"text-sm",children:"No expenses recorded"})]})})})]})})]})]})]})]})}const os=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"}));export{ss as P,qe as T,ce as a,O as b,E as c,os as p};
