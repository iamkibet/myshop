import{u as x,j as e,af as h,q as p,aA as u,b6 as j,aI as f}from"./vendor-react-NdMTiU_3.js";import{A as N,B as d,C as g,a as w,f as n}from"./dashboard-BRRSZ3Kr.js";import"./vendor-inertia-Uge9r9zn.js";import"./vendor-other-DeegM5Eu.js";import"./vendor-charts-wdNP6emn.js";const b=[{title:"Receipts",href:"/receipts"},{title:"View Receipt",href:"#"}];function D(){const{props:t}=x(),{sale:a}=t,i=t.app?.name||"MyShop";console.log("Sale data received:",a),console.log("Sale items:",a?.sale_items),a?.sale_items&&a.sale_items.forEach((s,r)=>{console.log(`Sale item ${r}:`,s),console.log(`Product for item ${r}:`,s.product)});const o=()=>{window.print()},m=async()=>{try{const s=await fetch(`/receipts/${a.id}/download`,{method:"GET",headers:{Accept:"text/html"}});if(!s.ok)throw new Error("Failed to download receipt");const r=await s.blob(),c=window.URL.createObjectURL(r),l=document.createElement("a");l.href=c,l.download=`receipt-${a.id}.html`,l.target="_blank",document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(()=>{window.URL.revokeObjectURL(c)},1e3),alert(`Receipt downloaded! To convert to PDF:
1. Open the HTML file in your browser
2. Press Ctrl+P (or Cmd+P on Mac)
3. Choose "Save as PDF" in the print dialog`)}catch(s){console.error("Failed to download receipt:",s),alert("Failed to download receipt. Please try again.")}};return e.jsxs(N,{breadcrumbs:b,children:[e.jsx(h,{title:`Receipt #${a.id}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[t.flash?.success&&e.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Success!"}),e.jsx("p",{className:"text-sm text-green-700",children:t.flash.success})]})})}),t.flash?.error&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error!"}),e.jsx("p",{className:"text-sm text-red-700",children:t.flash.error})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h1",{className:"text-xl font-bold sm:text-2xl",children:["Receipt #",a.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground sm:text-base",children:[new Date(a.created_at).toLocaleDateString()," at ",new Date(a.created_at).toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsx(p,{href:"/sales",children:e.jsxs(d,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Sales"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]})}),e.jsxs(d,{onClick:o,variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Print Receipt"}),e.jsx("span",{className:"sm:hidden",children:"Print"})]}),e.jsxs(d,{onClick:m,variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"}),e.jsx("span",{className:"sm:hidden",children:"Download"})]})]})]}),e.jsx("div",{className:"print:p-0",children:e.jsx(g,{className:"print:border-0 print:shadow-none",children:e.jsxs(w,{className:"p-0 print:p-0",children:[e.jsxs("div",{className:"border-b bg-gray-50 p-4 text-center sm:p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight sm:text-2xl",children:i}),e.jsx("p",{className:"text-sm text-muted-foreground sm:text-base",children:"Inventory & Sales Management System"})]}),e.jsxs("div",{className:"space-y-2 border-b p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{className:"text-muted-foreground",children:"Receipt #:"}),e.jsxs("span",{className:"font-medium",children:["#",a.id]})]}),e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"}),e.jsx("span",{className:"font-medium",children:new Date(a.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"}),e.jsx("span",{className:"font-medium",children:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("div",{className:"p-0",children:e.jsxs("div",{className:"divide-y",children:[e.jsxs("div",{className:"hidden grid-cols-12 gap-2 bg-gray-50 px-4 py-3 text-sm font-medium sm:grid sm:px-6 dark:bg-gray-800",children:[e.jsx("div",{className:"col-span-6",children:"ITEM"}),e.jsx("div",{className:"col-span-2 text-right",children:"QTY"}),e.jsx("div",{className:"col-span-2 text-right",children:"PRICE"}),e.jsx("div",{className:"col-span-2 text-right",children:"TOTAL"})]}),a.sale_items.map(s=>e.jsxs("div",{className:"block space-y-2 px-4 py-4 sm:grid sm:grid-cols-12 sm:gap-2 sm:space-y-0 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between sm:hidden",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium",children:s.product?.name||"Unknown Product"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.product?.sku||"N/A"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:n(s.total_price)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.quantity," Ã— ",n(s.unit_price)]})]})]}),e.jsxs("div",{className:"hidden sm:col-span-6 sm:block",children:[e.jsx("h3",{className:"font-medium",children:s.product?.name||"Unknown Product"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.product?.sku||"N/A"})]}),e.jsx("div",{className:"hidden sm:col-span-2 sm:block sm:text-right",children:s.quantity}),e.jsx("div",{className:"hidden sm:col-span-2 sm:block sm:text-right",children:n(s.unit_price)}),e.jsx("div",{className:"hidden sm:col-span-2 sm:block sm:text-right sm:font-medium",children:n(s.total_price)})]},s.id))]})}),e.jsx("div",{className:"border-t border-b p-4 sm:p-6",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between text-base font-bold sm:text-lg",children:[e.jsx("span",{children:"TOTAL:"}),e.jsx("span",{children:n(a.total_amount)})]})})}),e.jsxs("div",{className:"space-y-1 p-4 text-center text-xs text-muted-foreground sm:p-6",children:[e.jsx("p",{children:"Thank you for your purchase!"}),e.jsx("p",{children:"Items can be exchanged within 14 days with original receipt"}),e.jsx("p",{className:"mt-4",children:"Powered by Your POS System"}),e.jsxs("p",{children:[new Date().toLocaleDateString()," ",new Date().toLocaleTimeString()]})]})]})})})]})]})}export{D as default};
