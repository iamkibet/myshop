import{j as e,S as te,r as u,R as as,a as Ie,T as pe,D as ge,C as je,b as be,X as ve,P as ze,O as we,c as rs,d as ns,e as ls,f as is,g as os,A as ds,h as cs,u as R,i as xs,k as us,l as ms,m as hs,L as fs,n as ps,G as gs,I as js,o as bs,p as vs,F as ws,q as l,s as Oe,t as Ns,v as M,w as ys,x as ae,y as $,z as K,W as Cs,U as se,B as ks,E as I,H as Z,J as Ss,K as Ne,M as As,N as _s,Q as P,V as Ae,Y as ue,Z as Ms,_ as Es,$ as Pe,a0 as Ds,a1 as Is,a2 as ce,a3 as zs,a4 as Os,a5 as Ps,a6 as Rs,a7 as re,a8 as Fs,a9 as ee,aa as le,ab as ne,ac as Ts,ad as Ws,ae as $s,af as Hs}from"./vendor-react-NdMTiU_3.js";import{t as Ls,c as Us,a as ye}from"./vendor-other-DeegM5Eu.js";function x(...s){return Ls(Us(s))}function Y(s){const t=typeof s=="string"?parseFloat(s):s;return isNaN(t)?"KSH 0.00":new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}const Bs=ye("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function z({className:s,variant:t,asChild:a=!1,...n}){const c=a?te:"span";return e.jsx(c,{"data-slot":"badge",className:x(Bs({variant:t}),s),...n})}const qs=ye("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d({className:s,variant:t,size:a,asChild:n=!1,...c}){const g=n?te:"button";return e.jsx(g,{"data-slot":"button",className:x(qs({variant:t,size:a,className:s})),...c})}function L({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:x("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function U({className:s,...t}){return e.jsx("div",{"data-slot":"card-header",className:x("flex flex-col gap-1.5 px-6",s),...t})}function B({className:s,...t}){return e.jsx("div",{"data-slot":"card-title",className:x("leading-none font-semibold",s),...t})}function Jt({className:s,...t}){return e.jsx("div",{"data-slot":"card-description",className:x("text-muted-foreground text-sm",s),...t})}function q({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:x("px-6",s),...t})}const xe=768;function Re(){const[s,t]=u.useState();return u.useEffect(()=>{const a=window.matchMedia(`(max-width: ${xe-1}px)`),n=()=>{t(window.innerWidth<xe)};return a.addEventListener("change",n),t(window.innerWidth<xe),()=>a.removeEventListener("change",n)},[]),!!s}function me({className:s,type:t,...a}){return e.jsx("input",{type:t,"data-slot":"input",className:x("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...a})}function Xt({className:s,orientation:t="horizontal",decorative:a=!0,...n}){return e.jsx(as,{"data-slot":"separator-root",decorative:a,orientation:t,className:x("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...n})}function Vs({...s}){return e.jsx(Ie,{"data-slot":"sheet",...s})}function Ks({...s}){return e.jsx(ze,{"data-slot":"sheet-portal",...s})}function Zs({className:s,...t}){return e.jsx(we,{"data-slot":"sheet-overlay",className:x("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",s),...t})}function Qs({className:s,children:t,side:a="right",...n}){return e.jsxs(Ks,{children:[e.jsx(Zs,{}),e.jsxs(je,{"data-slot":"sheet-content",className:x("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",s),...n,children:[t,e.jsxs(be,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(ve,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Gs({className:s,...t}){return e.jsx("div",{"data-slot":"sheet-header",className:x("flex flex-col gap-1.5 p-4",s),...t})}function Js({className:s,...t}){return e.jsx(pe,{"data-slot":"sheet-title",className:x("text-foreground font-semibold",s),...t})}function Xs({className:s,...t}){return e.jsx(ge,{"data-slot":"sheet-description",className:x("text-muted-foreground text-sm",s),...t})}function Fe({delayDuration:s=0,...t}){return e.jsx(rs,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function Ys({...s}){return e.jsx(Fe,{children:e.jsx(ns,{"data-slot":"tooltip",...s})})}function et({...s}){return e.jsx(ls,{"data-slot":"tooltip-trigger",...s})}function st({className:s,sideOffset:t=4,children:a,...n}){return e.jsx(is,{children:e.jsxs(os,{"data-slot":"tooltip-content",sideOffset:t,className:x("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",s),...n,children:[a,e.jsx(ds,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const tt="sidebar_state",at=3600*24*7,rt="16rem",nt="18rem",lt="3rem",it="b",Te=u.createContext(null);function de(){const s=u.useContext(Te);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}function ot({defaultOpen:s=!0,open:t,onOpenChange:a,className:n,style:c,children:g,...y}){const j=Re(),[S,h]=u.useState(!1),[w,b]=u.useState(s),o=t??w,f=u.useCallback(p=>{const _=typeof p=="function"?p(o):p;a?a(_):b(_),document.cookie=`${tt}=${_}; path=/; max-age=${at}`},[a,o]),v=u.useCallback(()=>j?h(p=>!p):f(p=>!p),[j,f,h]);u.useEffect(()=>{const p=_=>{_.key===it&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),v())};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[v]);const A=o?"expanded":"collapsed",r=u.useMemo(()=>({state:A,open:o,setOpen:f,isMobile:j,openMobile:S,setOpenMobile:h,toggleSidebar:v}),[A,o,f,j,S,h,v]);return e.jsx(Te.Provider,{value:r,children:e.jsx(Fe,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":rt,"--sidebar-width-icon":lt,...c},className:x("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",n),...y,children:g})})})}function dt({side:s="left",variant:t="sidebar",collapsible:a="offcanvas",className:n,children:c,...g}){const{isMobile:y,state:j,openMobile:S,setOpenMobile:h}=de();return a==="none"?e.jsx("div",{"data-slot":"sidebar",className:x("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",n),...g,children:c}):y?e.jsxs(Vs,{open:S,onOpenChange:h,...g,children:[e.jsxs(Gs,{className:"sr-only",children:[e.jsx(Js,{children:"Sidebar"}),e.jsx(Xs,{children:"Displays the mobile sidebar."})]}),e.jsx(Qs,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":nt},side:s,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:c})})]}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":j,"data-collapsible":j==="collapsed"?a:"","data-variant":t,"data-side":s,"data-slot":"sidebar",children:[e.jsx("div",{className:x("relative h-svh w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{className:x("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...g,children:e.jsx("div",{"data-sidebar":"sidebar",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:c})})]})}function We({className:s,onClick:t,...a}){const{toggleSidebar:n}=de();return e.jsxs(d,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:x("h-7 w-7",s),onClick:c=>{t?.(c),n()},...a,children:[e.jsx(cs,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function ct({className:s,...t}){return e.jsx("main",{"data-slot":"sidebar-inset",className:x("bg-background relative flex max-w-full min-h-svh flex-1 flex-col","peer-data-[variant=inset]:min-h-[calc(100svh-(--spacing(4)))] md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-0",s),...t})}function xt({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:x("flex flex-col gap-2 p-2",s),...t})}function ut({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:x("flex flex-col gap-2 p-2",s),...t})}function mt({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:x("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...t})}function W({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:x("relative flex w-full min-w-0 flex-col p-2",s),...t})}function H({className:s,asChild:t=!1,...a}){const n=t?te:"div";return e.jsx(n,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:x("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 group-data-[collapsible=icon]:select-none group-data-[collapsible=icon]:pointer-events-none",s),...a})}function D({className:s,...t}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:x("flex w-full min-w-0 flex-col gap-1",s),...t})}function C({className:s,...t}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:x("group/menu-item relative",s),...t})}const ht=ye("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function k({asChild:s=!1,isActive:t=!1,variant:a="default",size:n="default",tooltip:c,className:g,...y}){const j=s?te:"button",{isMobile:S,state:h}=de(),w=e.jsx(j,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":t,className:x(ht({variant:a,size:n}),g),...y});return c?(typeof c=="string"&&(c={children:c}),e.jsxs(Ys,{children:[e.jsx(et,{asChild:!0,children:w}),e.jsx(st,{side:"right",align:"center",hidden:h!=="collapsed"||S,...c})]})):w}function ft({variant:s="header",children:t,...a}){return s==="sidebar"?e.jsx(ct,{...a,children:t}):e.jsx("main",{className:"mx-auto flex h-full w-full max-w-7xl flex-1 flex-col gap-4 rounded-xl",...a,children:t})}function pt({children:s,variant:t="header"}){const a=R().props.sidebarOpen;return t==="header"?e.jsx("div",{className:"flex min-h-screen w-full flex-col",children:s}):e.jsx(ot,{defaultOpen:a,children:s})}function gt({...s}){return e.jsx(xs,{"data-slot":"dropdown-menu",...s})}function jt({...s}){return e.jsx(us,{"data-slot":"dropdown-menu-trigger",...s})}function bt({className:s,sideOffset:t=4,...a}){return e.jsx(ms,{children:e.jsx(hs,{"data-slot":"dropdown-menu-content",sideOffset:t,className:x("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",s),...a})})}function vt({...s}){return e.jsx(gs,{"data-slot":"dropdown-menu-group",...s})}function _e({className:s,inset:t,variant:a="default",...n}){return e.jsx(js,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":a,className:x("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}function wt({className:s,inset:t,...a}){return e.jsx(fs,{"data-slot":"dropdown-menu-label","data-inset":t,className:x("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",s),...a})}function Me({className:s,...t}){return e.jsx(ps,{"data-slot":"dropdown-menu-separator",className:x("bg-border -mx-1 my-1 h-px",s),...t})}function $e({className:s,...t}){return e.jsx(bs,{"data-slot":"avatar",className:x("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function He({className:s,...t}){return e.jsx(vs,{"data-slot":"avatar-image",className:x("aspect-square size-full",s),...t})}function Le({className:s,...t}){return e.jsx(ws,{"data-slot":"avatar-fallback",className:x("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}function Nt(){return u.useCallback(s=>{const t=s.trim().split(" ");if(t.length===0)return"";if(t.length===1)return t[0].charAt(0).toUpperCase();const a=t[0].charAt(0),n=t[t.length-1].charAt(0);return`${a}${n}`.toUpperCase()},[])}function Ue({user:s,showEmail:t=!1}){const a=Nt();return e.jsxs(e.Fragment,{children:[e.jsxs($e,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(He,{src:s.avatar,alt:s.name}),e.jsx(Le,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:a(s.name)})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-medium",children:s.name}),t&&e.jsx("span",{className:"truncate text-xs text-muted-foreground",children:s.email})]})]})}function yt(){return u.useCallback(()=>{document.body.style.removeProperty("pointer-events")},[])}function Ct({user:s}){const t=yt(),a=()=>{t(),M.flushAll()};return e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"p-0 font-normal",children:e.jsx("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:e.jsx(Ue,{user:s,showEmail:!0})})}),e.jsx(Me,{}),e.jsx(vt,{children:e.jsx(_e,{asChild:!0,children:e.jsxs(l,{className:"block w-full",href:route("profile.edit"),as:"button",prefetch:!0,onClick:t,children:[e.jsx(Oe,{className:"mr-2"}),"Settings"]})})}),e.jsx(Me,{}),e.jsx(_e,{asChild:!0,children:e.jsxs(l,{className:"block w-full",method:"post",href:route("logout"),as:"button",onClick:a,children:[e.jsx(Ns,{className:"mr-2"}),"Log out"]})})]})}function kt(){const{auth:s}=R().props,{state:t}=de(),a=Re();return e.jsx(D,{children:e.jsx(C,{children:e.jsxs(gt,{children:[e.jsx(jt,{asChild:!0,children:e.jsxs(k,{size:"lg",className:"group text-sidebar-accent-foreground data-[state=open]:bg-sidebar-accent",children:[e.jsx(Ue,{user:s.user}),e.jsx(ys,{className:"ml-auto size-4"})]})}),e.jsx(bt,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",align:"end",side:a?"bottom":t==="collapsed"?"left":"bottom",children:e.jsx(Ct,{user:s.user})})]})})})}function St(s){return e.jsx("svg",{...s,viewBox:"0 0 40 42",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 8C8 3.58172 11.5817 0 16 0H24C28.4183 0 32 3.58172 32 8V10H36C37.1046 10 38 10.8954 38 12V38C38 39.1046 37.1046 40 36 40H4C2.89543 40 2 39.1046 2 38V12C2 10.8954 2.89543 10 4 10H8V8ZM10 10H30V8C30 4.68629 27.3137 2 24 2H16C12.6863 2 10 4.68629 10 8V10ZM4 12V38H36V12H4ZM12 16C12 15.4477 12.4477 15 13 15H27C27.5523 15 28 15.4477 28 16C28 16.5523 27.5523 17 27 17H13C12.4477 17 12 16.5523 12 16ZM12 20C12 19.4477 12.4477 19 13 19H27C27.5523 19 28 19.4477 28 20C28 20.5523 27.5523 21 27 21H13C12.4477 21 12 20.5523 12 20ZM12 24C12 23.4477 12.4477 23 13 23H27C27.5523 23 28 23.4477 28 24C28 24.5523 27.5523 25 27 25H13C12.4477 25 12 24.5523 12 24ZM12 28C12 27.4477 12.4477 27 13 27H27C27.5523 27 28 27.4477 28 28C28 28.5523 27.5523 29 27 29H13C12.4477 29 12 28.5523 12 28ZM12 32C12 31.4477 12.4477 31 13 31H27C27.5523 31 28 31.4477 28 32C28 32.5523 27.5523 33 27 33H13C12.4477 33 12 32.5523 12 32Z"})})}function At(){const{app:s}=R().props,t=s?.name||"KayzCollections";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-md bg-sidebar-primary text-sidebar-primary-foreground",children:e.jsx(St,{className:"size-5 fill-current text-white dark:text-black"})}),e.jsx("div",{className:"ml-1 grid flex-1 text-left text-sm",children:e.jsx("span",{className:"mb-0.5 truncate leading-tight font-semibold",children:t})})]})}function _t(){const{auth:s}=R().props,t=s.user,a=R(),n=t.role==="admin",c=t.role==="manager",g=n?"/admin-dashboard":"/dashboard",y=n?"Admin Dashboard":"Manager Dashboard";return e.jsxs(dt,{collapsible:"icon",variant:"inset",className:"z-50",children:[e.jsx(xt,{children:e.jsx(D,{children:e.jsx(C,{children:e.jsx(k,{size:"lg",asChild:!0,children:e.jsx(l,{href:g,prefetch:!0,children:e.jsx(At,{})})})})})}),e.jsxs(mt,{children:[e.jsx(W,{className:"px-2 py-0",children:e.jsx(D,{children:e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url===g,tooltip:{children:y},children:e.jsxs(l,{href:g,prefetch:!0,children:[e.jsx(ae,{}),e.jsx("span",{children:y})]})})})})}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"Inventory Management"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/products")&&!a.url.includes("/create"),tooltip:{children:"Products"},children:e.jsxs(l,{href:"/products",prefetch:!0,children:[e.jsx($,{}),e.jsx("span",{children:"Products"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url==="/products/create",tooltip:{children:"Add Product"},children:e.jsxs(l,{href:"/products/create",prefetch:!0,children:[e.jsx(K,{}),e.jsx("span",{children:"Add Product"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/products"),tooltip:{children:"Stock Management"},children:e.jsxs(l,{href:"/products",prefetch:!0,children:[e.jsx(Cs,{}),e.jsx("span",{children:"Stock Management"})]})})})]})]}),e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"User Management"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/users"),tooltip:{children:"All Users"},children:e.jsxs(l,{href:"/users",prefetch:!0,children:[e.jsx(se,{}),e.jsx("span",{children:"All Users"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/users"),tooltip:{children:"Managers"},children:e.jsxs(l,{href:"/users",prefetch:!0,children:[e.jsx(ks,{}),e.jsx("span",{children:"Managers"})]})})})]})]}),e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"Financial Management"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/sales"),tooltip:{children:"All Sales"},children:e.jsxs(l,{href:"/sales",prefetch:!0,children:[e.jsx(I,{}),e.jsx("span",{children:"All Sales"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/expenses"),tooltip:{children:"Expenses"},children:e.jsxs(l,{href:"/expenses",prefetch:!0,children:[e.jsx(I,{}),e.jsx("span",{children:"Expenses"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/wallets"),tooltip:{children:"Wallets"},children:e.jsxs(l,{href:"/wallets",prefetch:!0,children:[e.jsx(Z,{}),e.jsx("span",{children:"Wallets"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/commission-rates"),tooltip:{children:"Commission Rates"},children:e.jsxs(l,{href:"/commission-rates",prefetch:!0,children:[e.jsx(Ss,{}),e.jsx("span",{children:"Commission Rates"})]})})})]})]}),e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"Reports & Analytics"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/sales"),tooltip:{children:"Sales Reports"},children:e.jsxs(l,{href:"/sales",prefetch:!0,children:[e.jsx(Ne,{}),e.jsx("span",{children:"Sales Reports"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/products"),tooltip:{children:"Product Reports"},children:e.jsxs(l,{href:"/products",prefetch:!0,children:[e.jsx(As,{}),e.jsx("span",{children:"Product Reports"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/expenses"),tooltip:{children:"Expense Reports"},children:e.jsxs(l,{href:"/expenses",prefetch:!0,children:[e.jsx(_s,{}),e.jsx("span",{children:"Expense Reports"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/users"),tooltip:{children:"User Reports"},children:e.jsxs(l,{href:"/users",prefetch:!0,children:[e.jsx(se,{}),e.jsx("span",{children:"User Reports"})]})})})]})]})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"Sales Operations"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/dashboard"),tooltip:{children:"Product Catalog"},children:e.jsxs(l,{href:"/dashboard",prefetch:!0,children:[e.jsx($,{}),e.jsx("span",{children:"Product Catalog"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/cart"),tooltip:{children:"Shopping Cart"},children:e.jsxs(l,{href:"/cart",prefetch:!0,children:[e.jsx(P,{}),e.jsx("span",{children:"Shopping Cart"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/sales"),tooltip:{children:"Sales History"},children:e.jsxs(l,{href:"/sales",prefetch:!0,children:[e.jsx(Ae,{}),e.jsx("span",{children:"Sales History"})]})})})]})]}),e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"My Expenses"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url==="/expenses/create",tooltip:{children:"Submit Expense"},children:e.jsxs(l,{href:"/expenses/create",prefetch:!0,children:[e.jsx(K,{}),e.jsx("span",{children:"Submit Expense"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/expenses")&&a.url!=="/expenses/create",tooltip:{children:"My Expense History"},children:e.jsxs(l,{href:"/expenses",prefetch:!0,children:[e.jsx(I,{}),e.jsx("span",{children:"My Expense History"})]})})})]})]}),e.jsxs(W,{className:"px-2 py-0",children:[e.jsx(H,{children:"My Wallet"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/wallet"),tooltip:{children:"Wallet Balance"},children:e.jsxs(l,{href:"/wallet",prefetch:!0,children:[e.jsx(ue,{}),e.jsx("span",{children:"Wallet Balance"})]})})}),e.jsx(C,{children:e.jsx(k,{asChild:!0,isActive:a.url.startsWith("/wallet"),tooltip:{children:"Transaction History"},children:e.jsxs(l,{href:"/wallet",prefetch:!0,children:[e.jsx(Ae,{}),e.jsx("span",{children:"Transaction History"})]})})})]})]})]})]}),e.jsx(ut,{children:e.jsx(kt,{})})]})}function Mt({...s}){return e.jsx("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...s})}function Et({className:s,...t}){return e.jsx("ol",{"data-slot":"breadcrumb-list",className:x("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",s),...t})}function Dt({className:s,...t}){return e.jsx("li",{"data-slot":"breadcrumb-item",className:x("inline-flex items-center gap-1.5",s),...t})}function It({asChild:s,className:t,...a}){const n=s?te:"a";return e.jsx(n,{"data-slot":"breadcrumb-link",className:x("hover:text-foreground transition-colors",t),...a})}function zt({className:s,...t}){return e.jsx("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:x("text-foreground font-normal",s),...t})}function Ot({children:s,className:t,...a}){return e.jsx("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:x("[&>svg]:size-3.5",t),...a,children:s??e.jsx(Ms,{})})}function Pt({breadcrumbs:s}){return e.jsx(e.Fragment,{children:s.length>0&&e.jsx(Mt,{children:e.jsx(Et,{children:s.map((t,a)=>{const n=a===s.length-1;return e.jsxs(u.Fragment,{children:[e.jsx(Dt,{children:n?e.jsx(zt,{children:t.title}):e.jsx(It,{asChild:!0,children:e.jsx(l,{href:t.href,children:t.title})})}),!n&&e.jsx(Ot,{})]},a)})})})})}const Be=Ds,qe=Is,Ce=u.forwardRef(({className:s,align:t="center",sideOffset:a=4,...n},c)=>e.jsx(Es,{children:e.jsx(Pe,{ref:c,align:t,sideOffset:a,className:x("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));Ce.displayName=Pe.displayName;function Ee({notifications:s,unreadCount:t,onNotificationRead:a}){const[n,c]=u.useState(!1),[g,y]=u.useState(!1),[j,S]=u.useState(s),[h,w]=u.useState(t),b=r=>{switch(r){case"alert-triangle":return e.jsx(ee,{className:"h-4 w-4 text-yellow-500"});case"x-circle":return e.jsx(Fs,{className:"h-4 w-4 text-red-500"});case"trending-up":return e.jsx(re,{className:"h-4 w-4 text-green-500"});case"check-circle":return e.jsx(Rs,{className:"h-4 w-4 text-green-500"});case"info":return e.jsx(Ps,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(ce,{className:"h-4 w-4 text-gray-500"})}},o=r=>{switch(r){case"success":return"border-l-green-500 bg-green-50";case"warning":return"border-l-yellow-500 bg-yellow-50";case"error":return"border-l-red-500 bg-red-50";case"info":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},f=async r=>{try{y(!0),(await fetch("/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({notification_id:r})})).ok&&(S(_=>_.filter(E=>E.id!==r)),w(_=>Math.max(0,_-1)),a?.(r))}catch(p){console.error("Failed to mark notification as read:",p)}finally{y(!1)}},v=async r=>{if(!r.action_data)return;const p=r.action_data;switch(r.is_read||await f(r.id),p.type){case"sale":p.url?window.location.href=p.url:p.id&&M.visit(`/receipts/${p.id}`);break;case"product":p.id&&M.visit(`/products/${p.id}`);break;case"low_stock":case"out_of_stock":M.visit("/admin-dashboard?tab=inventory");break;default:p.url&&(window.location.href=p.url)}c(!1)},A=j.slice(0,5);return e.jsxs(Be,{open:n,onOpenChange:c,children:[e.jsx(qe,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"sm",className:"relative h-9 w-9 rounded-md",children:[e.jsx(ce,{className:"h-4 w-4"}),h>0&&e.jsx(z,{variant:"destructive",className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full p-0 text-xs",children:h>9?"9+":h})]})}),e.jsx(Ce,{className:"w-80 p-0",align:"end",children:e.jsxs(L,{className:"border-0 shadow-none",children:[e.jsx(U,{className:"pb-3",children:e.jsxs(B,{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Recent Notifications"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>M.visit("/notifications"),className:"h-6 px-2 text-xs",children:"View All"})]})}),e.jsx(q,{className:"pt-0",children:e.jsx("div",{className:"max-h-80 space-y-2 overflow-y-auto",children:A.length>0?A.map(r=>e.jsxs("div",{className:`flex items-start space-x-3 rounded-lg p-3 transition-all hover:shadow-sm ${r.is_read?"opacity-75":""} ${o(r.type)}`,children:[b(r.icon),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx("h4",{className:"truncate text-sm font-medium",children:r.title}),!r.is_read&&e.jsx(z,{variant:"secondary",className:"text-xs",children:"New"})]}),e.jsx("p",{className:"mb-1 line-clamp-2 text-xs text-muted-foreground",children:r.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(r.created_at).toLocaleString()}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!r.is_read&&e.jsx(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:p=>{p.stopPropagation(),f(r.id)},disabled:g,title:"Mark as Read",children:e.jsx(zs,{className:"h-3 w-3"})}),r.action_data&&e.jsx(d,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>v(r),children:e.jsx(Os,{className:"h-3 w-3"})})]})]})]})]},r.id)):e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(ce,{className:"mx-auto mb-2 h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"})]})})})]})})]})}function De({alerts:s,alertCounts:t,onAlertResolved:a}){const[n,c]=u.useState(!1),[g,y]=u.useState(!1),[j,S]=u.useState(new Set),h=r=>{switch(r){case"low_stock":return e.jsx(ee,{className:"h-4 w-4 text-orange-500"});case"out_of_stock":return e.jsx(ve,{className:"h-4 w-4 text-red-500"});case"pending_expense":return e.jsx(Z,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(ee,{className:"h-4 w-4 text-gray-500"})}},w=r=>{switch(r){case"low_stock":return"border-l-orange-500 bg-orange-50";case"out_of_stock":return"border-l-red-500 bg-red-50";case"pending_expense":return"border-l-yellow-500 bg-yellow-50";default:return"border-l-gray-500 bg-gray-50"}},b=r=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),o=async(r,p)=>{try{y(!0);const _=`${p}_${r}`;S(E=>new Set([...E,_])),a?.(r,p)}catch(_){console.error("Failed to mark alert as resolved:",_);const E=`${p}_${r}`;S(Q=>{const N=new Set(Q);return N.delete(E),N})}finally{y(!1)}},f=r=>{switch(r.type){case"low_stock":case"out_of_stock":M.visit("/products");break;case"pending_expense":M.visit("/expenses");break}c(!1)},A=[...s.lowStock.map(r=>({...r,type:"low_stock"})),...s.outOfStock.map(r=>({...r,type:"out_of_stock"})),...s.pendingExpenses.map(r=>({...r,type:"pending_expense"}))].filter(r=>!j.has(`${r.type}_${r.id}`)).slice(0,5);return e.jsxs(Be,{open:n,onOpenChange:c,children:[e.jsx(qe,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"sm",className:"relative h-9 w-9 rounded-md",children:[e.jsx(ee,{className:"h-4 w-4 text-orange-500"}),t.total>0&&e.jsx(z,{variant:"destructive",className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full p-0 text-xs",children:t.total>9?"9+":t.total})]})}),e.jsx(Ce,{className:"w-80 p-0",align:"end",children:e.jsxs(L,{className:"border-0 shadow-none",children:[e.jsx(U,{className:"pb-3",children:e.jsxs(B,{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Active Alerts"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>M.visit("/admin-dashboard"),className:"h-6 px-2 text-xs",children:"View All"})]})}),e.jsx(q,{className:"pt-0",children:e.jsx("div",{className:"max-h-80 space-y-2 overflow-y-auto",children:A.length>0?A.map(r=>e.jsxs("div",{className:`flex items-start space-x-3 rounded-lg p-3 transition-all hover:shadow-sm ${w(r.type)}`,children:[h(r.type),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx("h4",{className:"truncate text-sm font-medium",children:r.title}),e.jsx(z,{variant:"secondary",className:`text-xs ${r.type==="low_stock"?"bg-orange-100 text-orange-800":r.type==="out_of_stock"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:r.type==="low_stock"?"Low Stock":r.type==="out_of_stock"?"Out of Stock":"Pending"})]}),e.jsx("p",{className:"mb-1 line-clamp-2 text-xs text-muted-foreground",children:r.message}),r.amount&&e.jsx("p",{className:"mb-1 text-xs font-medium text-gray-700",children:b(r.amount)}),r.quantity&&e.jsxs("p",{className:"mb-1 text-xs text-gray-600",children:[r.quantity," units remaining"]}),r.sku&&e.jsxs("p",{className:"mb-1 text-xs text-gray-500",children:["SKU: ",r.sku]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:r.date||"Just now"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:p=>{p.stopPropagation(),o(r.id,r.type)},disabled:g,title:"Mark as Resolved",children:e.jsx(le,{className:"h-3 w-3 text-green-600"})}),e.jsx(d,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>f(r),children:"View"})]})]})]})]},`${r.type}_${r.id}`)):e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(le,{className:"mx-auto mb-2 h-8 w-8 text-green-500"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active alerts"})]})})})]})})]})}function Rt({alertCounts:s,analytics:t}){const{auth:a,notifications:n,analytics:c}=R().props,g=a.user,[y,j]=u.useState(!1),[S,h]=u.useState(""),[w,b]=u.useState(!1),[o,f]=u.useState(!1),v=()=>{document.fullscreenElement?(document.exitFullscreen(),j(!1)):(document.documentElement.requestFullscreen(),j(!0))},A=N=>{N.preventDefault(),S.trim()&&M.get("/products",{search:S.trim()})},r=()=>{window.innerWidth<640&&f(!0)},p=()=>{window.innerWidth<640&&!S.trim()&&f(!1)},_=()=>{window.innerWidth<640&&f(!o)};u.useEffect(()=>{const N=m=>{if(o&&window.innerWidth<640){const O=document.querySelector("[data-search-container]");O&&!O.contains(m.target)&&f(!1)}};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[o]);const E=()=>{M.get("/products/create")},Q=()=>{M.get("/settings/profile")};return u.useEffect(()=>{const N=m=>{if((m.metaKey||m.ctrlKey)&&m.key==="k"){m.preventDefault();const O=document.querySelector('input[placeholder="Search products..."]');O&&O.focus()}};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[]),e.jsxs("header",{className:"flex h-16 shrink-0 items-center justify-between border-b border-sidebar-border/50 px-4 sm:px-6 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1 min-w-0",children:[e.jsx(We,{className:"-ml-1 flex-shrink-0"}),e.jsx("div",{className:"relative sm:hidden","data-search-container":!0,children:o?e.jsxs("form",{onSubmit:A,className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Search...",className:"pl-10 pr-12 w-48 transition-all duration-200",value:S,onChange:N=>h(N.target.value),onFocus:r,onBlur:p,autoFocus:!0}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-400",children:"⌘K"})]}):e.jsx(d,{variant:"ghost",size:"sm",onClick:_,className:"h-8 w-8 p-0 hover:bg-gray-100",children:e.jsx(ne,{className:"h-4 w-4 text-gray-400"})})}),e.jsxs("form",{onSubmit:A,className:"relative hidden sm:block",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Search products...",className:"pl-10 pr-16 w-64",value:S,onChange:N=>h(N.target.value)}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-400",children:"⌘K"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-3 flex-shrink-0",children:[e.jsxs(d,{className:"bg-orange-500 hover:bg-orange-600 text-white",onClick:E,size:"sm",children:[e.jsx(K,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add New"})]}),e.jsxs("div",{className:"sm:hidden flex items-center gap-1",children:[s&&s.total>0&&(t?.professional||c?.professional)&&e.jsx(De,{alerts:{lowStock:(t?.professional||c?.professional)?.lowStockAlerts||[],outOfStock:(t?.professional||c?.professional)?.outOfStockAlerts||[],pendingExpenses:(t?.professional||c?.professional)?.recentExpenses?.filter(N=>N.status==="pending")||[]},alertCounts:s,onAlertResolved:(N,m)=>{console.log("Alert resolved:",N,m)}}),e.jsx(Ee,{notifications:n?.recent||[],unreadCount:n?.unreadCount||0})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:v,title:y?"Exit Fullscreen":"Enter Fullscreen",className:"hidden sm:flex",children:y?e.jsx(Ts,{className:"h-4 w-4"}):e.jsx(Ws,{className:"h-4 w-4"})}),s&&s.total>0&&(t?.professional||c?.professional)&&e.jsx("div",{className:"hidden sm:block",children:e.jsx(De,{alerts:{lowStock:(t?.professional||c?.professional)?.lowStockAlerts||[],outOfStock:(t?.professional||c?.professional)?.outOfStockAlerts||[],pendingExpenses:(t?.professional||c?.professional)?.recentExpenses?.filter(N=>N.status==="pending")||[]},alertCounts:s,onAlertResolved:(N,m)=>{console.log("Alert resolved:",N,m)}})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Ee,{notifications:n?.recent||[],unreadCount:n?.unreadCount||0})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(d,{variant:"ghost",size:"sm",onClick:Q,title:"Settings",children:e.jsx(Oe,{className:"h-4 w-4"})})}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs($e,{className:"h-8 w-8 cursor-pointer",onClick:Q,children:[e.jsx(He,{src:"/placeholder-avatar.jpg",alt:g.name}),e.jsx(Le,{children:g.name.split(" ").map(N=>N[0]).join("").toUpperCase()})]})})]})]})}function Ft({breadcrumbs:s=[],alertCounts:t,analytics:a}){return R().url.includes("/admin-dashboard")?e.jsx(Rt,{alertCounts:t,analytics:a}):e.jsx("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b border-sidebar-border/50 px-3 sm:px-6 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12 md:px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"-ml-1"}),e.jsx(Pt,{breadcrumbs:s})]})})}const he=Ie,Yt=$s,Tt=ze,ea=be,Ve=u.forwardRef(({className:s,...t},a)=>e.jsx(we,{ref:a,className:x("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Ve.displayName=we.displayName;const ie=u.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(Tt,{children:[e.jsx(Ve,{}),e.jsxs(je,{ref:n,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(be,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ie.displayName=je.displayName;const fe=({className:s,...t})=>e.jsx("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});fe.displayName="DialogHeader";const Wt=({className:s,...t})=>e.jsx("div",{className:x("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Wt.displayName="DialogFooter";const oe=u.forwardRef(({className:s,...t},a)=>e.jsx(pe,{ref:a,className:x("text-lg font-semibold leading-none tracking-tight",s),...t}));oe.displayName=pe.displayName;const Ke=u.forwardRef(({className:s,...t},a)=>e.jsx(ge,{ref:a,className:x("text-sm text-muted-foreground",s),...t}));Ke.displayName=ge.displayName;function Ze(){const[s,t]=u.useState({}),[a,n]=u.useState(0);u.useEffect(()=>{const b=localStorage.getItem("cart");if(b)try{const o=JSON.parse(b);t(o),c(o)}catch(o){console.error("Error parsing cart from localStorage:",o)}},[]),u.useEffect(()=>{const b=f=>{if(f.key==="cart")if(f.newValue)try{const v=JSON.parse(f.newValue);t(v),c(v)}catch(v){console.error("Error parsing updated cart:",v)}else t({}),n(0)};window.addEventListener("storage",b);const o=()=>{const f=localStorage.getItem("cart");if(f)try{const v=JSON.parse(f);t(v),c(v)}catch(v){console.error("Error parsing cart from custom event:",v)}else t({}),n(0)};return window.addEventListener("cartUpdated",o),()=>{window.removeEventListener("storage",b),window.removeEventListener("cartUpdated",o)}},[]);const c=b=>{const o=Object.values(b).reduce((f,v)=>f+v.quantity,0);n(o)};return{cart:s,cartCount:a,addToCart:b=>{const o={...s};o[b.product_id]=b,t(o),localStorage.setItem("cart",JSON.stringify(o));const f=Object.values(o).reduce((v,A)=>v+A.quantity,0);n(f),window.dispatchEvent(new CustomEvent("cartUpdated"))},updateCartItem:(b,o)=>{const f={...s};if(f[b]){f[b].quantity=o,t(f),localStorage.setItem("cart",JSON.stringify(f));const v=Object.values(f).reduce((A,r)=>A+r.quantity,0);n(v),window.dispatchEvent(new CustomEvent("cartUpdated"))}},removeFromCart:b=>{const o={...s};delete o[b],t(o),localStorage.setItem("cart",JSON.stringify(o));const f=Object.values(o).reduce((v,A)=>v+A.quantity,0);n(f),window.dispatchEvent(new CustomEvent("cartUpdated"))},clearCart:()=>{t({}),n(0),localStorage.removeItem("cart"),window.dispatchEvent(new CustomEvent("cartUpdated"))},syncCartWithBackend:async b=>{try{const o=await fetch("/cart/sync",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({cart:b})});if(!o.ok)throw new Error("Failed to sync cart");return await o.json()}catch(o){throw console.error("Error syncing cart:",o),o}},getCartTotal:()=>Object.values(s).reduce((b,o)=>b+o.quantity*o.unit_price,0)}}function $t(){const{auth:s,url:t}=R().props,a=s.user,n=a.role==="admin",c=a.role==="manager",{cartCount:g}=Ze(),[y,j]=u.useState(!1),[S,h]=u.useState(!1);u.useEffect(()=>{const b=()=>{j(o=>o)};return window.addEventListener("cartUpdated",b),()=>{window.removeEventListener("cartUpdated",b)}},[]);const w=b=>t===b;return!n&&!c?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden",children:e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-lg border-t border-gray-200 dark:bg-gray-900/95 dark:border-gray-700 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(l,{href:"/dashboard",className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/dashboard")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(ae,{className:`h-5 w-5 ${w("/dashboard")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),c&&e.jsxs(l,{href:"/expenses",className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/expenses")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(I,{className:`h-5 w-5 ${w("/expenses")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Expenses"})]}),n&&e.jsxs(l,{href:"/products",className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/products")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx($,{className:`h-5 w-5 ${w("/products")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Products"})]})]}),e.jsx("div",{className:"flex-shrink-0 -mt-4",children:e.jsx(d,{onClick:()=>j(!0),className:"h-14 w-14 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 p-0 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 active:scale-95",children:e.jsx(K,{className:"h-6 w-6 text-white"})})}),e.jsx("div",{className:"flex items-center space-x-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs(l,{href:"/sales",className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/sales")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(I,{className:`h-5 w-5 ${w("/sales")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Sales"})]}),e.jsxs(l,{href:"/wallets",className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/wallets")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(ue,{className:`h-5 w-5 ${w("/wallets")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Wallets"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{href:"/cart",className:`relative flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/cart")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(P,{className:`h-5 w-5 ${w("/cart")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Cart"}),g>0&&e.jsx("div",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-in zoom-in-95 duration-200",children:g>99?"99+":g})]}),e.jsxs(l,{href:"/sales",className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${w("/sales")?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(re,{className:`h-5 w-5 ${w("/sales")?"text-blue-600 dark:text-blue-400":""}`}),e.jsx("span",{className:"text-xs font-medium",children:"Sales"})]})]})})]})})}),e.jsx(he,{open:y,onOpenChange:j,children:e.jsxs(ie,{className:"sm:max-w-md",children:[e.jsx(fe,{children:e.jsx(oe,{className:"text-center",children:n?"Quick Actions":"Make Sale"})}),e.jsx("div",{className:"grid grid-cols-2 gap-4 p-4",children:n?e.jsxs(e.Fragment,{children:[e.jsx(l,{href:"/products/create",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(K,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Product"})]})}),e.jsx(l,{href:"/expenses/create",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(I,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Expense"})]})}),e.jsx(l,{href:"/users/create",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(se,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Add User"})]})}),e.jsx(l,{href:"/wallets",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(ue,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"View Wallets"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{href:"/dashboard",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(P,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Browse Products"})]})}),e.jsx(l,{href:"/cart",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(P,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"View Cart"}),g>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:g>99?"99+":g})]})}),e.jsx(l,{href:"/expenses/create",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(I,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Expense"})]})}),e.jsx(l,{href:"/sales",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(re,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"Sales History"})]})}),e.jsx(l,{href:"/wallets",onClick:()=>j(!1),children:e.jsxs(d,{className:"w-full h-20 flex-col space-y-2",variant:"outline",children:[e.jsx(Z,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"My Wallet"})]})})]})})]})}),e.jsx(he,{open:S,onOpenChange:h,children:e.jsxs(ie,{className:"sm:max-w-md",children:[e.jsx(fe,{children:e.jsx(oe,{children:n?"Admin Navigation":"Manager Menu"})}),e.jsx("div",{className:"space-y-2 p-4",children:n?e.jsxs(e.Fragment,{children:[e.jsx(l,{href:"/dashboard",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(ae,{className:"mr-3 h-4 w-4"}),"Dashboard"]})}),e.jsx(l,{href:"/products",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx($,{className:"mr-3 h-4 w-4"}),"Products"]})}),e.jsx(l,{href:"/users",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(se,{className:"mr-3 h-4 w-4"}),"Users"]})}),e.jsx(l,{href:"/wallets",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(Z,{className:"mr-3 h-4 w-4"}),"Manager Wallets"]})}),e.jsx(l,{href:"/expenses",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(I,{className:"mr-3 h-4 w-4"}),"Expenses"]})}),e.jsx(l,{href:"/sales",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(I,{className:"mr-3 h-4 w-4"}),"View All Sales"]})}),e.jsx(l,{href:"/commission-rates",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(Ne,{className:"mr-3 h-4 w-4"}),"Commission Rates"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{href:"/dashboard",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(ae,{className:"mr-3 h-4 w-4"}),"Dashboard"]})}),e.jsx(l,{href:"/dashboard",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(P,{className:"mr-3 h-4 w-4"}),"Product Catalog"]})}),e.jsx(l,{href:"/cart",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(P,{className:"mr-3 h-4 w-4"}),"Shopping Cart",g>0&&e.jsx("div",{className:"ml-auto h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:g>99?"99+":g})]})}),e.jsx(l,{href:"/sales",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(re,{className:"mr-3 h-4 w-4"}),"Sales History"]})}),e.jsx(l,{href:"/expenses",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(I,{className:"mr-3 h-4 w-4"}),"My Expenses"]})}),e.jsx(l,{href:"/expenses/create",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(K,{className:"mr-3 h-4 w-4"}),"Add Expense"]})}),e.jsx(l,{href:"/wallets",onClick:()=>h(!1),children:e.jsxs(d,{className:"w-full justify-start",variant:"ghost",children:[e.jsx(Z,{className:"mr-3 h-4 w-4"}),"My Wallet"]})})]})})]})})]})}function Ht({children:s,breadcrumbs:t=[],alertCounts:a,analytics:n}){return e.jsxs(pt,{variant:"sidebar",children:[e.jsx(_t,{}),e.jsxs(ft,{variant:"sidebar",className:"overflow-x-hidden",children:[e.jsx(Ft,{breadcrumbs:t,alertCounts:a,analytics:n}),s,e.jsx($t,{})]})]})}const Lt=({children:s,breadcrumbs:t,...a})=>e.jsx(Ht,{breadcrumbs:t,...a,children:s});function Ut({className:s}){const t=u.useId();return e.jsxs("svg",{className:s,fill:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:t,x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})})}),e.jsx("rect",{stroke:"none",fill:`url(#${t})`,width:"100%",height:"100%"})]})}const Bt=[{title:"Dashboard",href:"/dashboard"}],qt=s=>s.quantity===0?{status:"Out of Stock",color:"destructive"}:s.quantity<=s.low_stock_threshold?{status:"Low Stock",color:"secondary"}:{status:"In Stock",color:"default"},Vt=s=>s.quantity===0?"destructive":s.quantity<=s.low_stock_threshold?"secondary":"default",Kt=s=>s.quantity===0?"Out of Stock":s.quantity===1?"1 remaining":s.quantity<=s.low_stock_threshold?`${s.quantity} remaining`:`${s.quantity} in stock`;function Zt(){const{auth:s,products:t,cartCount:a=0,flash:n}=R().props,c=s.user,g=c.role==="admin",y=c.role==="manager",j=new URLSearchParams(window.location.search),S=j.get("search")||"",h=j.get("category")||"all",[w,b]=u.useState(S),[o,f]=u.useState(h),[v,A]=u.useState(null),{cartCount:r,addToCart:p}=Ze(),[_,E]=u.useState(new Set),[Q,N]=u.useState(0),[m,O]=u.useState(null),[F,G]=u.useState(1),[Qe,J]=u.useState(!1),Ge=t?.data?[...new Set(t.data.map(i=>i.category))].sort():[],Je=i=>{b(i),M.get("/dashboard",{search:i,category:o!=="all"?o:""},{preserveState:!0,preserveScroll:!0})},ke=i=>{f(i),M.get("/dashboard",{search:w,category:i!=="all"?i:""},{preserveState:!0,preserveScroll:!0})},Xe=async()=>{if(m){console.log("Adding to cart - selectedProduct:",m),console.log("Adding to cart - quantity:",F),A(m.id);try{const i={product_id:m.id,quantity:F,unit_price:m.discount_price||m.selling_price,product_name:m.name,image_url:m.image_url};console.log("Adding cart item:",i),p(i),console.log("Cart item added, current cart count:",r),N(T=>T+1),J(!1),O(null),G(1),E(T=>new Set([...T,m.id])),setTimeout(()=>{E(T=>{const V=new Set(T);return V.delete(m.id),V})},2e3)}catch(i){console.error("Failed to add to cart:",i),alert("Failed to add item to cart. Please try again.")}finally{A(null)}}};return e.jsxs(Lt,{breadcrumbs:Bt,children:[e.jsx(Hs,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[n?.success&&e.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Success!"}),e.jsx("p",{className:"text-sm text-green-700",children:n.success})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h1",{className:"text-lg font-bold sm:text-xl md:text-2xl",children:["Welcome back, ",c.role," ",c.name,"!"]}),e.jsxs("p",{className:"mt-1 text-sm text-muted-foreground sm:text-base",children:["You are logged in as a"," ",e.jsx(z,{variant:"outline",className:"text-xs sm:text-sm",children:c.role})]})]}),y&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{href:"/wallet",children:e.jsxs(d,{variant:"outline",className:"relative w-full sm:w-auto",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"My Wallet"})]})}),e.jsx(l,{href:"/cart",className:"hidden sm:block",children:e.jsxs(d,{variant:"outline",className:"relative",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Cart"}),r>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:r>99?"99+":r})]})})]})]}),g&&e.jsxs("div",{className:"grid auto-rows-min gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(L,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Admin Dashboard"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(q,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Analytics & Insights"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comprehensive business analytics"}),e.jsx(l,{href:"/admin-dashboard",className:"mt-2 inline-block",children:e.jsx(d,{size:"sm",variant:"outline",children:"View Dashboard"})})]})]}),e.jsxs(L,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Products"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(q,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Manage Inventory"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add, edit, and manage products"}),e.jsx(l,{href:"/products",className:"mt-2 inline-block",children:e.jsx(d,{size:"sm",variant:"outline",children:"View Products"})})]})]}),e.jsxs(L,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Users"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(q,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage user accounts and roles"}),e.jsx(l,{href:"/users",className:"mt-2 inline-block",children:e.jsx(d,{size:"sm",variant:"outline",children:"View Users"})})]})]})]}),y&&t&&e.jsx(e.Fragment,{children:e.jsxs(L,{children:[e.jsxs(U,{children:[e.jsx(B,{children:"Product Shop"}),e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative w-full sm:max-w-sm",children:[e.jsx(ne,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(me,{placeholder:"Search products...",value:w,onChange:i=>Je(i.target.value),className:"w-full pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:[e.jsx(d,{variant:o==="all"?"default":"outline",size:"sm",onClick:()=>ke("all"),className:"px-2 py-1 text-xs sm:px-3 sm:py-2",children:"All Categories"}),Ge.map(i=>e.jsx(d,{variant:o===i?"default":"outline",size:"sm",onClick:()=>ke(i),className:"px-2 py-1 text-xs sm:px-3 sm:py-2",children:i},i))]})]})]}),e.jsxs(q,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.data.map(i=>{const T=qt(i),V=_.has(i.id),Se=v===i.id,Ye=i.quantity>0,es=i.discount_price||i.selling_price,ss=i.discount_price&&i.discount_price<i.selling_price;return e.jsx("div",{children:e.jsxs(L,{className:`overflow-hidden transition-all duration-300 hover:shadow-lg cursor-pointer ${V?"bg-green-50/70 ring-1 ring-green-400 dark:bg-green-900/30":""}`,onClick:()=>{console.log("Product card clicked:",i.name),G(1),O(i),J(!0)},children:[e.jsx(U,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),e.jsx(B,{className:"truncate text-base font-bold",children:i.name})]}),e.jsxs("div",{className:"mb-2 flex flex-wrap gap-1",children:[e.jsx(z,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:i.brand}),e.jsx(z,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:i.category})]})]}),e.jsx(z,{variant:T.color,className:"flex-shrink-0 px-2 py-1 text-xs font-medium",children:T.status})]})}),e.jsxs(q,{className:"space-y-4",children:[e.jsx("div",{className:"relative h-32 overflow-hidden rounded-lg bg-gray-50 dark:bg-gray-800",children:i.image_url?e.jsx("img",{src:i.image_url,alt:i.name,className:"h-full w-full object-cover transition-transform duration-300 hover:scale-105",onError:X=>{X.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0NCA4OS41NDQ0IDgwIDEwMCA4MEMxMTAuNDU2IDgwIDEyMCA4OS41NDQ0IDEyMCAxMEMxMjAgMTEwLjQ1NiAxMTAuNDU2IDEyMCAxMDAgMTIwQzg5LjU0NDQgMTIwIDgwIDExMC40NTYgODAgMTAwWiIgZmlsbD0iI0QxRDVFM0EiLz4KPC9zdmc+"}}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-4 text-muted-foreground",children:[e.jsx($,{className:"h-8 w-8"}),e.jsx("span",{className:"mt-1 text-center text-xs",children:"No image available"})]})}),e.jsxs("div",{className:"space-y-3",children:[i.description&&e.jsx("p",{className:"line-clamp-2 text-xs text-muted-foreground",children:i.description}),i.features&&Array.isArray(i.features)&&e.jsx("div",{className:"flex flex-wrap gap-1",children:i.features.slice(0,3).map((X,ts)=>e.jsx(z,{variant:"outline",className:"px-1.5 py-0.5 text-xs font-normal text-muted-foreground",children:X},ts))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-xs text-muted-foreground",children:"Price"}),e.jsxs("div",{className:"space-y-1",children:[ss&&e.jsx("div",{className:"text-xs text-muted-foreground line-through",children:Y(i.selling_price)}),e.jsx("div",{className:"text-base font-bold text-green-600",children:Y(es)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-xs text-muted-foreground",children:"Stock"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-base font-semibold",children:i.quantity}),i.quantity>0&&i.quantity<=i.low_stock_threshold&&e.jsx(ee,{className:"h-4 w-4 text-yellow-500"})]})]})]}),e.jsx(d,{onClick:X=>{X.stopPropagation(),console.log("Sell button clicked for:",i.name),G(1),O(i),J(!0)},disabled:!Ye||Se,className:`w-full transition-all duration-200 ${V?"bg-green-600 hover:bg-green-700":"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800"}`,size:"sm",children:Se?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Adding..."]}):V?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Added to Cart"]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Sell Product"]})})]})]})},i.id)})}),t.data.length===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx($,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No products found."})]}),t.data.length>0&&e.jsxs("div",{className:"mt-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-xs text-muted-foreground sm:text-sm",children:["Showing ",(t.current_page-1)*t.per_page+1," to"," ",Math.min(t.current_page*t.per_page,t.total)," of ",t.total," products"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 sm:justify-end",children:[t.current_page>1&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>{const i=new URLSearchParams(window.location.search);i.set("page",String(t.current_page-1)),M.get("/dashboard",Object.fromEntries(i))},className:"px-2 py-1 text-xs sm:px-3 sm:py-2",children:"Previous"}),e.jsxs("span",{className:"text-xs text-muted-foreground sm:text-sm",children:["Page ",t.current_page," of ",t.last_page]}),t.current_page<t.last_page&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>{const i=new URLSearchParams(window.location.search);i.set("page",String(t.current_page+1)),M.get("/dashboard",Object.fromEntries(i))},className:"px-2 py-1 text-xs sm:px-3 sm:py-2",children:"Next"})]})]})]})]})}),e.jsx("div",{className:"relative min-h-[400px] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(Ut,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]}),e.jsx(he,{open:Qe,onOpenChange:J,children:e.jsxs(ie,{className:"w-[95vw] max-w-lg p-4 sm:p-6 max-h-[85vh] sm:max-h-[80vh] overflow-y-auto",children:[e.jsx(oe,{className:"text-lg sm:text-xl font-bold text-center mb-2",children:m?.name}),e.jsx(Ke,{className:"text-center text-xs sm:text-sm text-muted-foreground mb-4",children:"Select quantity and add this item to your cart"}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[m?.description&&e.jsx("div",{className:"text-center px-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed max-w-sm mx-auto",children:m.description})}),m&&e.jsxs("div",{className:"space-y-4 rounded-lg border-2 border-green-200 bg-green-50 dark:bg-green-900/20 p-3 sm:p-4 mx-2 sm:mx-0",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-2 py-1 sm:px-3 sm:py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 rounded-full text-xs sm:text-sm font-medium",children:[e.jsx(le,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Product Selected"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Price:"}),e.jsx("span",{className:"text-sm sm:text-base font-semibold",children:Y(m.discount_price||m.selling_price)})]}),m.discount_price&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Original Price:"}),e.jsx("span",{className:"text-sm sm:text-base line-through text-muted-foreground",children:Y(m.selling_price)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Stock:"}),e.jsx(z,{variant:Vt(m),className:"text-xs px-2 py-1",children:Kt(m)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"SKU:"}),e.jsx("span",{className:"text-xs sm:text-sm font-mono text-muted-foreground",children:m.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-2 block",children:"Quantity"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:()=>G(Math.max(1,F-1)),disabled:F<=1,className:"h-8 w-8 p-0 flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold",children:"-"})}),e.jsx("div",{className:"flex-1 text-center",children:e.jsx("span",{className:"text-sm font-medium px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded-md min-w-[60px] inline-block",children:F})}),e.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:()=>G(Math.min(m.quantity,F+1)),disabled:F>=m.quantity,className:"h-8 w-8 p-0 flex-shrink-0",children:e.jsx("span",{className:"text-lg font-bold",children:"+"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:["Max: ",m.quantity," available"]})]}),e.jsx("div",{className:"pt-2 border-t border-green-200 dark:border-green-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm sm:text-base font-medium",children:"Total:"}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-green-600",children:Y((m.discount_price||m.selling_price)*F)})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4 sm:pt-6 px-2 sm:px-0",children:[e.jsx(d,{onClick:Xe,disabled:!m||v===m?.id,size:"lg",className:"w-full h-14 sm:h-10 bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 shadow-lg text-sm sm:text-base font-medium rounded-xl sm:rounded-lg",children:v===m?.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5 animate-spin rounded-full border-2 border-current border-t-transparent"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Adding to Cart..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Add to Cart"})]})}),e.jsx(d,{variant:"outline",onClick:()=>J(!1),disabled:v===m?.id,size:"lg",className:"w-full h-14 sm:h-10 text-sm sm:text-base font-medium rounded-xl sm:rounded-lg",children:"Cancel"})]})]})]})})]})}const sa=Object.freeze(Object.defineProperty({__proto__:null,default:Zt},Symbol.toStringTag,{value:"Module"}));export{Lt as A,d as B,L as C,he as D,me as I,Xt as S,Fe as T,q as a,U as b,x as c,B as d,Jt as e,Y as f,z as g,ie as h,fe as i,oe as j,Wt as k,Yt as l,Ke as m,St as n,ea as o,sa as p,Ze as u};
