import{r as u,j as e,aK as Ie,aL as Be,af as me,Q as oe,ab as ie,y as Z,a9 as ne,v as U,aa as xe,X as ce,z as re,q as se,aA as De,aM as Qe,H as Ue,aN as ee,a7 as Ze,az as $e,aC as He,u as Ae,a6 as Ge,aO as We,aF as ye,aJ as je,aB as be}from"./vendor-react-NdMTiU_3.js";import{c as de,A as he,C as B,b as Y,d as X,I as P,a as Q,g as R,f as O,B as o,e as ge,D as Me,h as Fe,i as Pe,j as qe,k as Ee,u as Ke}from"./dashboard-BRRSZ3Kr.js";import{S as W,a as K,b as V,c as J,d as C,L as M,T as Ne}from"./expenses-D7tWSJP3.js";import{a as Ve}from"./vendor-other-DeegM5Eu.js";const ze=u.forwardRef(({className:s,...m},f)=>e.jsx(Ie,{className:de("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...m,ref:f,children:e.jsx(Be,{className:de("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ze.displayName=Ie.displayName;const Je=[{title:"Dashboard",href:"/dashboard"},{title:"Product Catalog",href:"/products/catalog"}],we=s=>s.discount_price??s.selling_price,fe=s=>!!(s.discount_price&&s.discount_price<s.selling_price),_e=s=>fe(s)?Math.round((s.selling_price-s.discount_price)/s.selling_price*100):0;function Ye({products:s,categories:m,filters:f}){const[y,j]=u.useState(f.search||""),[a,_]=u.useState(f.category||""),c=l=>{j(l),b({search:l})},N=l=>{_(l),b({category:l!=="all"?l:""})},b=l=>{const v={search:y,category:a,...l};U.get("/products/catalog",v,{preserveState:!0,preserveScroll:!0})},p=l=>{const v={search:y,category:a,page:l};U.get("/products/catalog",v,{preserveState:!0,preserveScroll:!0})};return e.jsxs(he,{breadcrumbs:Je,children:[e.jsx(me,{title:"Product Catalog"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-3 sm:gap-4 rounded-xl p-2 sm:p-4 pb-20 sm:pb-4",children:[e.jsx("div",{className:"sm:hidden",children:e.jsx("div",{className:"flex items-center justify-between bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm",children:e.jsx(oe,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Product Catalog"}),e.jsxs("p",{className:"text-sm text-green-100",children:[s.total," products available"]})]})]})})}),e.jsx("div",{className:"hidden sm:flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Product Catalog"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse and select products for sale"})]})}),e.jsxs(B,{children:[e.jsxs(Y,{className:"pb-3 sm:pb-6",children:[e.jsx(X,{className:"hidden sm:block",children:"Find Products"}),e.jsxs("div",{className:"sm:hidden space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(P,{placeholder:"Search products...",value:y,onChange:l=>c(l.target.value),className:"pl-10"})]}),e.jsxs(W,{value:a||"all",onValueChange:N,children:[e.jsx(K,{children:e.jsx(V,{placeholder:"All Categories"})}),e.jsxs(J,{children:[e.jsx(C,{value:"all",children:"All Categories"}),m.map(l=>e.jsx(C,{value:l,children:l},l))]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(P,{placeholder:"Search products...",value:y,onChange:l=>c(l.target.value),className:"max-w-sm pl-10"})]}),e.jsxs(W,{value:a||"all",onValueChange:N,children:[e.jsx(K,{className:"w-40",children:e.jsx(V,{placeholder:"Category"})}),e.jsxs(J,{children:[e.jsx(C,{value:"all",children:"All Categories"}),m.map(l=>e.jsx(C,{value:l,children:l},l))]})]})]})]}),e.jsxs(Q,{className:"p-3 sm:p-6",children:[e.jsx("div",{className:"sm:hidden grid grid-cols-1 gap-3",children:s.data.map(l=>{const v=we(l),x=fe(l),n=_e(l);return e.jsx(B,{className:"overflow-hidden",children:e.jsx(Q,{className:"p-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:l.image_url?e.jsx("img",{src:l.image_url,alt:l.name,className:"h-20 w-20 rounded-lg border object-cover",onError:w=>{w.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0NCA4OS41NDQ0IDgwIDEwMCA4MEMxMTAuNDU2IDgwIDEyMCA4OS41NDQ0IDEyMCAxMEMxMjAgMTEwLjQ1NiAxMTAuNDU2IDEyMCAxMDAgMTIwQzg5LjU0NDQgMTIwIDgwIDExMC40NTYgODAgMTAwWiIgZmlsbD0iI0QxRDVFM0EiLz4KPC9zdmc+"}}):e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-lg bg-muted",children:e.jsx(Z,{className:"h-10 w-10 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm truncate",children:l.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:l.category}),l.brand&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.brand})]})]}),l.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:l.description})]}),x&&e.jsxs(R,{variant:"secondary",className:"ml-2 text-xs",children:["-",n,"%"]})]}),e.jsx("div",{className:"mt-2 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsx("div",{children:e.jsx("span",{className:"font-medium text-lg",children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"line-through text-muted-foreground text-sm",children:O(l.selling_price)}),e.jsx("span",{className:"ml-2 text-green-600",children:O(v)})]}):O(v)})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Stock:"}),e.jsx("span",{className:"font-medium",children:l.quantity}),l.quantity>0&&l.quantity<=l.low_stock_threshold&&e.jsx(ne,{className:"h-3 w-3 text-amber-500"})]})]})}),e.jsx("div",{className:"mt-3",children:e.jsxs(o,{className:"w-full",disabled:l.quantity===0,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),l.quantity===0?"Out of Stock":"Add to Cart"]})})]})]})})},l.id)})}),e.jsx("div",{className:"hidden sm:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.data.map(l=>{const v=we(l),x=fe(l),n=_e(l);return e.jsx(B,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-3",children:[l.image_url?e.jsx("img",{src:l.image_url,alt:l.name,className:"h-48 w-full rounded-lg border object-cover",onError:w=>{w.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0NCA4OS41NDQ0IDgwIDEwMCA4MEMxMTAuNDU2IDgwIDEyMCA4OS41NDQ0IDEyMCAxMEMxMjAgMTEwLjQ1NiAxMTAuNDU2IDEyMCAxMDAgMTIwQzg5LjU0NDQgMTIwIDgwIDExMC40NTYgODAgMTAwWiIgZmlsbD0iI0QxRDVFM0EiLz4KPC9zdmc+"}}):e.jsx("div",{className:"flex h-48 w-full items-center justify-center rounded-lg bg-muted",children:e.jsx(Z,{className:"h-16 w-16 text-muted-foreground"})}),x&&e.jsxs(R,{variant:"secondary",className:"absolute top-2 right-2",children:["-",n,"%"]}),e.jsx("div",{className:"absolute top-2 left-2",children:l.quantity===0?e.jsx(R,{variant:"destructive",children:"Out of Stock"}):l.quantity<=l.low_stock_threshold?e.jsx(R,{variant:"secondary",children:"Low Stock"}):e.jsx(R,{variant:"default",children:"In Stock"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm truncate",children:l.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:l.category}),l.brand&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.brand})]})]})]}),l.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:l.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm",children:e.jsx("span",{className:"font-medium text-lg",children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"line-through text-muted-foreground text-sm",children:O(l.selling_price)}),e.jsx("span",{className:"ml-2 text-green-600",children:O(v)})]}):O(v)})}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["SKU: ",l.sku]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Stock: ",l.quantity]}),l.quantity>0&&l.quantity<=l.low_stock_threshold&&e.jsxs("div",{className:"flex items-center space-x-1 text-amber-600",children:[e.jsx(ne,{className:"h-3 w-3"}),e.jsx("span",{children:"Low Stock"})]})]}),e.jsxs(o,{className:"w-full",disabled:l.quantity===0,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),l.quantity===0?"Out of Stock":"Add to Cart"]})]})]})},l.id)})}),s.data.length===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(Z,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No products found."})]}),s.last_page>1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sm:hidden mt-4 space-y-3",children:[e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Showing ",s.from||0," to ",s.to||0," of ",s.total," results"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>p(s.current_page-1),disabled:s.current_page===1,className:"px-3",children:"â†"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(3,s.last_page)},(l,v)=>{const n=Math.max(1,s.current_page-1)+v;return n>s.last_page?null:e.jsx(o,{variant:n===s.current_page?"default":"outline",size:"sm",onClick:()=>p(n),className:"w-10 h-8 p-0",children:n},n)})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>p(s.current_page+1),disabled:s.current_page===s.last_page,className:"px-3",children:"â†’"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Page ",s.current_page," of ",s.last_page]})})]}),e.jsxs("div",{className:"hidden sm:flex mt-6 items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s.from||0," to ",s.to||0," of ",s.total," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>p(s.current_page-1),disabled:s.current_page===1,children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,s.last_page)},(l,v)=>{const x=v+1;return e.jsx(o,{variant:x===s.current_page?"default":"outline",size:"sm",onClick:()=>p(x),children:x},x)})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>p(s.current_page+1),disabled:s.current_page===s.last_page,children:"Next"})]})]})]})]})]})]})]})}const fs=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"}));function G({message:s,className:m="",...f}){return s?e.jsx("p",{...f,className:de("text-sm text-red-600 dark:text-red-400",m),children:s}):null}const Xe=Ve("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function es({className:s,variant:m,...f}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:de(Xe({variant:m}),s),...f})}function ss({className:s,...m}){return e.jsx("div",{"data-slot":"alert-description",className:de("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...m})}function as({value:s,onChange:m,existingBrands:f=[],label:y="Brand",placeholder:j="Select or add brand",error:a}){const[_,c]=u.useState(!1),[N,b]=u.useState(""),[p,l]=u.useState(f);u.useEffect(()=>{l(f)},[f]);const v=g=>{g==="add-new"?(c(!0),b("")):(m(g==="no-brand"?"":g),c(!1))},x=async()=>{if(N.trim()){const g=N.trim();try{const k=await(await fetch("/save-brand",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({brand:g})})).json();k.success?(p.includes(g)||l(q=>[...q,g]),m(g),c(!1),b("")):(console.error("Failed to save brand:",k.message),p.includes(g)||l(q=>[...q,g]),m(g),c(!1),b(""))}catch(h){console.error("Error saving brand:",h),p.includes(g)||l(k=>[...k,g]),m(g),c(!1),b("")}}},n=()=>{c(!1),b("")},w=g=>{g.key==="Enter"?(g.preventDefault(),x()):g.key==="Escape"&&n()};return _?e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{children:y}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{value:N,onChange:g=>b(g.target.value),placeholder:"Enter brand name",onKeyDown:w,autoFocus:!0,className:"flex-1"}),e.jsx(o,{type:"button",onClick:x,disabled:!N.trim(),size:"sm",className:"px-3",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(o,{type:"button",variant:"outline",onClick:n,size:"sm",className:"px-3",children:e.jsx(ce,{className:"h-4 w-4"})})]}),a&&e.jsx("p",{className:"text-sm text-destructive",children:a})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{children:y}),e.jsxs(W,{value:s||"no-brand",onValueChange:v,children:[e.jsx(K,{className:"w-full",children:e.jsx(V,{placeholder:j})}),e.jsxs(J,{className:"max-h-60",children:[e.jsx(C,{value:"no-brand",className:"text-muted-foreground",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-muted-foreground mr-2"}),"No Brand"]})}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Existing Brands"}),p.map(g=>e.jsx(C,{value:g,className:"cursor-pointer",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary mr-2"}),g]})},g))]}),e.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Actions"}),e.jsx(C,{value:"add-new",className:"cursor-pointer text-primary",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Add New Brand"]})})]})]}),a&&e.jsx("p",{className:"text-sm text-destructive",children:a})]})}function ts({value:s,onChange:m,existingCategories:f,label:y="Category",placeholder:j="Select or add category",error:a}){const[_,c]=u.useState(!1),[N,b]=u.useState(""),[p,l]=u.useState(f);u.useEffect(()=>{l(f)},[f]);const v=h=>{h==="add_new"?(c(!0),b("")):(m(h),c(!1))},x=async()=>{if(N.trim()){const h=N.trim();try{const q=await(await fetch("/save-category",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({category:h})})).json();q.success?(p.includes(h)||l(t=>[...t,h]),m(h),c(!1),b("")):(console.error("Failed to save category:",q.message),p.includes(h)||l(t=>[...t,h]),m(h),c(!1),b(""))}catch(k){console.error("Error saving category:",k),p.includes(h)||l(q=>[...q,h]),m(h),c(!1),b("")}}},n=()=>{c(!1),b("")},w=h=>{h.key==="Enter"?(h.preventDefault(),x()):h.key==="Escape"&&n()},g=[...p,"Shoes","T-Shirts","Pants","Dresses","Jackets","Hats","Accessories","Electronics","Home & Garden","Sports","Other"].filter((h,k,q)=>q.indexOf(h)===k);return e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{children:y}),_?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{value:N,onChange:h=>b(h.target.value),placeholder:"Enter new category name",onKeyDown:w,autoFocus:!0,className:"flex-1"}),e.jsx(o,{type:"button",onClick:x,disabled:!N.trim(),size:"sm",className:"px-3",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(o,{type:"button",variant:"outline",onClick:n,size:"sm",className:"px-3",children:e.jsx(ce,{className:"h-4 w-4"})})]}):e.jsxs(W,{value:s,onValueChange:v,children:[e.jsx(K,{className:"w-full",children:e.jsx(V,{placeholder:j})}),e.jsxs(J,{className:"max-h-60",children:[g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Available Categories"}),g.map(h=>e.jsx(C,{value:h,className:"cursor-pointer",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary mr-2"}),h]})},h))]}),e.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Actions"}),e.jsx(C,{value:"add_new",className:"cursor-pointer text-primary",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Add New Category"]})})]})]}),a&&e.jsx("p",{className:"text-sm text-destructive",children:a})]})}function pe({product:s,isEditing:m=!1,existingCategories:f=[],existingBrands:y=[]}){const j=t=>Array.isArray(t)?t:[],[a,_]=u.useState({name:s?.name||"",category:s?.category||"",description:s?.description||"",brand:s?.brand||"",image_url:s?.image_url||"",features:j(s?.features),sku:s?.sku||"",quantity:s?.quantity||0,cost_price:s?.cost_price||0,selling_price:s?.selling_price||0,discount_price:s?.discount_price,low_stock_threshold:s?.low_stock_threshold||5,is_active:s?.is_active??!0}),[c,N]=u.useState({}),[b,p]=u.useState(!1),[l,v]=u.useState("");u.useEffect(()=>{if(m&&s){const t={name:s.name||"",category:s.category||"",description:s.description||"",brand:s.brand||"",image_url:s.image_url||"",features:j(s.features),sku:s.sku||"",quantity:s.quantity||0,cost_price:s.cost_price||0,selling_price:s.selling_price||0,discount_price:s.discount_price,low_stock_threshold:s.low_stock_threshold||5,is_active:s.is_active??!0};_(t)}},[m,s]);const x=(t,d)=>{d===void 0&&["image_url","description","brand","sku"].includes(t)&&(d=""),_(S=>({...S,[t]:d})),c[t]&&N(S=>({...S,[t]:""}))},n=()=>{l.trim()&&a.features&&Array.isArray(a.features)&&!j(a.features).includes(l.trim())&&(_(t=>({...t,features:[...j(t.features),l.trim()]})),v(""))},w=t=>{a.features&&Array.isArray(a.features)&&_(d=>({...d,features:j(d.features).filter((S,E)=>E!==t)}))},g=()=>{if(a.cost_price&&a.selling_price){const t=a.selling_price-a.cost_price,d=t/a.cost_price*100;return{profit:t,margin:d}}return{profit:0,margin:0}},h=async t=>{t.preventDefault(),console.log("Form submitted!"),console.log("Form data:",a),console.log("Is editing:",m),console.log("Product:",s),p(!0),N({});try{if(m&&s){console.log("Submitting product update for:",s.id),console.log("Product ID:",s.id);const d={};a.name!==s.name&&(d.name=a.name),a.category!==s.category&&(d.category=a.category),a.description!==s.description&&(d.description=a.description||""),a.brand!==s.brand&&(d.brand=a.brand||""),a.sku!==s.sku&&(d.sku=a.sku||""),a.quantity!==s.quantity&&(d.quantity=a.quantity),a.cost_price!==s.cost_price&&(d.cost_price=a.cost_price),a.selling_price!==s.selling_price&&(d.selling_price=a.selling_price),a.discount_price!==s.discount_price&&(d.discount_price=a.discount_price||""),a.low_stock_threshold!==s.low_stock_threshold&&(d.low_stock_threshold=a.low_stock_threshold),a.is_active!==s.is_active&&(d.is_active=a.is_active?"1":"0");const S=JSON.stringify(a.features||[]),E=JSON.stringify(s.features||[]);if(S!==E&&(d.features=S),a.imageFile){const z=new FormData;Object.keys(d).forEach(ae=>{z.append(ae,d[ae])}),z.append("image",a.imageFile),console.log("Sending FormData with image for edit"),await U.visit(`/products/${s.id}`,{method:"put",data:z,preserveState:!1,preserveScroll:!1});return}else a.image_url&&a.image_url!==s.image_url&&!a.image_url.startsWith("blob:")&&(d.image_url=a.image_url);if(Object.keys(d).length===0){N({general:"No changes detected. Please modify at least one field before updating."}),p(!1);return}console.log("Data to send (only changed fields):",d),console.log("URL:",`/products/${s.id}`),await U.put(`/products/${s.id}`,d)}else{const d={};if(Object.keys(a).forEach(S=>{if(S==="features")d[S]=JSON.stringify(a.features||[]);else if(!(S==="imageFile"&&a.imageFile)){if(S!=="imageFile"){const E=a[S];E!=null&&(typeof E=="boolean"?d[S]=E?"1":"0":d[S]=E)}}}),!a.imageFile&&a.image_url&&!a.image_url.startsWith("blob:")&&(d.image_url=a.image_url),a.imageFile){const S=new FormData;Object.keys(d).forEach(E=>{S.append(E,d[E])}),S.append("image",a.imageFile),console.log("Sending FormData with image for create"),await U.visit("/products",{method:"post",data:S,preserveState:!1,preserveScroll:!1})}else console.log("Submitting new product:",d),await U.post("/products",d)}}catch(d){if(console.error("Form submission error:",d),d.response?.data?.errors){const S={};Object.entries(d.response.data.errors).forEach(([E,z])=>{S[E]=Array.isArray(z)?z[0]:String(z)}),N(S)}else d.response?.data?.message?N({general:d.response.data.message}):d.message?N({general:d.message}):N({general:"An error occurred while saving the product. Please try again."})}finally{p(!1)}},{profit:k,margin:q}=g();return e.jsxs(he,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Products",href:"/products"},{title:m?"Edit Product":"Create Product",href:"#"}],children:[e.jsx(me,{title:m?"Edit Product":"Create Product"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-3 pb-20 sm:gap-6 sm:p-4 sm:pb-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex flex-col gap-3 sm:gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 sm:flex-row sm:items-center sm:gap-6",children:[e.jsx(se,{href:"/products",children:e.jsxs(o,{variant:"outline",size:"sm",className:"w-full sm:w-auto sm:px-4 sm:py-2",children:[e.jsx(De,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Products"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]})}),e.jsxs("div",{className:"min-w-0 flex-1 sm:border-l sm:border-border sm:pl-6",children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight sm:text-2xl lg:text-3xl",children:m?"Edit Product":"Create Product"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground sm:text-base sm:leading-relaxed",children:m?"Update product information":"Add a new product to your inventory"})]})]})}),e.jsxs("form",{onSubmit:h,className:"space-y-4 sm:space-y-6",noValidate:!0,children:[c.general&&e.jsxs(es,{variant:"destructive",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx(ss,{children:c.general})]}),e.jsxs(B,{className:"shadow-sm",children:[e.jsxs(Y,{className:"pb-4",children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Z,{className:"h-5 w-5"}),"Basic Information"]}),e.jsx(ge,{children:"Essential product details like name, category, and description"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"name",className:"text-sm font-medium",children:"Product Name *"}),e.jsx(P,{id:"name",placeholder:"Enter product name",value:a.name,onChange:t=>x("name",t.target.value),className:`h-11 text-base ${c.name?"border-red-500 focus:ring-red-500":""}`}),c.name&&e.jsx(G,{message:c.name})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(ts,{value:a.category,onChange:t=>x("category",t),existingCategories:f,error:c.category})}),e.jsx("div",{className:"space-y-2",children:e.jsx(as,{value:a.brand||"",onChange:t=>x("brand",t),existingBrands:y,error:c.brand})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),e.jsx(Ne,{id:"description",placeholder:"Describe your product...",value:a.description||"",onChange:t=>x("description",t.target.value),rows:3,className:`resize-none text-base min-h-[80px] ${c.description?"border-red-500 focus:ring-red-500":""}`}),c.description&&e.jsx(G,{message:c.description})]}),e.jsxs(B,{className:"border-dashed",children:[e.jsxs(Y,{className:"pb-3",children:[e.jsx(X,{className:"text-base",children:"Features"}),e.jsx(ge,{children:"Add key features or specifications for your product"})]}),e.jsxs(Q,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"newFeature",className:"text-sm font-medium",children:"Add Feature"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsx(P,{id:"newFeature",placeholder:"Enter a feature...",value:l,onChange:t=>v(t.target.value),onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),n()),className:"h-10"}),e.jsxs(o,{type:"button",onClick:n,disabled:!l.trim(),size:"sm",className:"w-full sm:w-auto",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"sm:hidden",children:"Add Feature"})]})]})]}),a.features&&Array.isArray(a.features)&&a.features.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{className:"text-sm font-medium",children:"Current Features"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j(a.features).map((t,d)=>e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-primary/10 px-3 py-1.5 text-sm border border-primary/20",children:[e.jsx("span",{className:"text-primary-foreground",children:t}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 hover:bg-primary/20 rounded-full",onClick:()=>w(d),children:e.jsx(ce,{className:"h-3 w-3"})})]},d))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{htmlFor:"image",className:"text-sm font-medium",children:"Product Image"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),e.jsxs("div",{className:"space-y-4",children:[(a.imageFile||a.image_url)&&e.jsxs("div",{className:"relative inline-block group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.imageFile?URL.createObjectURL(a.imageFile):a.image_url,alt:"Product preview",className:"h-40 w-40 rounded-lg border-2 border-border object-cover shadow-md transition-all duration-200 group-hover:scale-105",onError:t=>{t.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-200 rounded-lg"})]}),e.jsx(o,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-3 -right-3 h-7 w-7 rounded-full p-0 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:()=>{_(t=>({...t,image_url:"",imageFile:void 0}))},children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:a.imageFile?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:a.imageFile.name}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsxs("span",{children:[(a.imageFile.size/1024/1024).toFixed(2)," MB"]})]}):"External image URL"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(M,{htmlFor:"image",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Upload File"]}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 hover:border-primary/50 hover:bg-primary/5 ${a.imageFile?"border-primary bg-primary/10":"border-muted-foreground/25"}`,onDragOver:t=>{t.preventDefault(),t.currentTarget.classList.add("border-primary","bg-primary/10")},onDragLeave:t=>{t.preventDefault(),t.currentTarget.classList.remove("border-primary","bg-primary/10")},onDrop:t=>{t.preventDefault(),t.currentTarget.classList.remove("border-primary","bg-primary/10");const d=t.dataTransfer.files;d.length>0&&d[0].type.startsWith("image/")&&_(S=>({...S,imageFile:d[0],image_url:""}))},children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Z,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.imageFile?"File Selected":"Drop image here"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"or click to browse"})]})]}),e.jsx(P,{id:"image",type:"file",accept:"image/*",onChange:t=>{const d=t.target.files?.[0];d&&_(S=>({...S,imageFile:d,image_url:""}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),c.image&&e.jsx(G,{message:c.image})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(M,{htmlFor:"image_url",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Image URL"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{id:"image_url",type:"url",placeholder:"https://example.com/image.jpg",value:a.image_url||"",onChange:t=>{_(d=>({...d,imageFile:void 0,image_url:t.target.value}))},className:`h-10 text-base ${c.image_url?"border-red-500 focus:ring-red-500":""}`}),e.jsxs(o,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{if(a.image_url){const t=new Image;t.onload=()=>{_(d=>({...d,imageFile:void 0,image_url:a.image_url}))},t.onerror=()=>{N(d=>({...d,image_url:"Invalid image URL or image cannot be loaded"}))},t.src=a.image_url}},disabled:!a.image_url,children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Test URL"]})]}),c.image_url&&e.jsx(G,{message:c.image_url})]})]}),e.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Supported formats:"})," JPEG, PNG, GIF, WebP"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recommended:"})," Square images (1:1 ratio) work best"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," File upload takes priority over URL input"]})]})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"sku",className:"text-sm font-medium",children:"SKU"}),e.jsx(P,{id:"sku",placeholder:"Auto-generated if empty",value:a.sku||"",onChange:t=>x("sku",t.target.value),className:`h-10 text-base ${c.sku?"border-red-500 focus:ring-red-500":""}`}),c.sku&&e.jsx(G,{message:c.sku}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate a unique SKU"})]})]})]}),e.jsxs(B,{className:"shadow-sm",children:[e.jsxs(Y,{className:"pb-4",children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Pricing & Inventory"]}),e.jsx(ge,{children:"Set your product pricing and stock levels"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:"cost_price",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Cost Price *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground text-sm",children:"$"}),e.jsx(P,{id:"cost_price",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:a.cost_price===0?"":a.cost_price,onChange:t=>x("cost_price",t.target.value===""?0:parseFloat(t.target.value)||0),onFocus:t=>t.target.value==="0"&&(t.target.value=""),onBlur:t=>t.target.value===""&&(t.target.value="0"),className:`h-11 pl-8 text-base ${c.cost_price?"border-red-500 focus:ring-red-500":""}`,inputMode:"decimal"})]}),c.cost_price&&e.jsx(G,{message:c.cost_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:"selling_price",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Selling Price *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground text-sm",children:"$"}),e.jsx(P,{id:"selling_price",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:a.selling_price===0?"":a.selling_price,onChange:t=>x("selling_price",t.target.value===""?0:parseFloat(t.target.value)||0),onFocus:t=>t.target.value==="0"&&(t.target.value=""),onBlur:t=>t.target.value===""&&(t.target.value="0"),className:`h-11 pl-8 text-base ${c.selling_price?"border-red-500 focus:ring-red-500":""}`,inputMode:"decimal"})]}),c.selling_price&&e.jsx(G,{message:c.selling_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:"discount_price",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Discount Price"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground text-sm",children:"$"}),e.jsx(P,{id:"discount_price",type:"number",step:"0.01",min:"0",placeholder:"Optional",value:a.discount_price===0?"":a.discount_price||"",onChange:t=>x("discount_price",t.target.value===""?void 0:parseFloat(t.target.value)||0),onFocus:t=>t.target.value==="0"&&(t.target.value=""),onBlur:t=>t.target.value===""&&(t.target.value="0"),className:`h-11 pl-8 text-base ${c.discount_price?"border-red-500 focus:ring-red-500":""}`,inputMode:"decimal"})]}),c.discount_price&&e.jsx(G,{message:c.discount_price})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide",children:"Inventory"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:"quantity",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Quantity *"]}),e.jsx(P,{id:"quantity",type:"number",min:"0",placeholder:"0",value:a.quantity===0?"":a.quantity,onChange:t=>x("quantity",t.target.value===""?0:parseInt(t.target.value)||0),onFocus:t=>t.target.value==="0"&&(t.target.value=""),onBlur:t=>t.target.value===""&&(t.target.value="0"),className:`h-11 text-base ${c.quantity?"border-red-500 focus:ring-red-500":""}`,inputMode:"numeric"}),c.quantity&&e.jsx(G,{message:c.quantity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:"low_stock_threshold",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Low Stock Threshold *"]}),e.jsx(P,{id:"low_stock_threshold",type:"number",min:"0",placeholder:"5",value:a.low_stock_threshold===0?"":a.low_stock_threshold,onChange:t=>x("low_stock_threshold",t.target.value===""?0:parseInt(t.target.value)||0),onFocus:t=>t.target.value==="0"&&(t.target.value=""),onBlur:t=>t.target.value===""&&(t.target.value="0"),className:`h-11 text-base ${c.low_stock_threshold?"border-red-500 focus:ring-red-500":""}`,inputMode:"numeric"}),c.low_stock_threshold&&e.jsx(G,{message:c.low_stock_threshold})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"is_active",className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[e.jsx(ze,{id:"is_active",checked:a.is_active,onCheckedChange:t=>x("is_active",t)}),e.jsx(M,{htmlFor:"is_active",className:"text-sm",children:a.is_active?"Active":"Inactive"})]}),c.is_active&&e.jsx(G,{message:c.is_active})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 p-4",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2 text-green-800",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Profit Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Profit Amount:"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:O(k)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Profit Margin:"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[q.toFixed(1),"%"]})]})]}),e.jsx("p",{className:"text-xs text-green-700 mt-3 text-center",children:"ðŸ’¡ Update prices to see profit calculations in real-time"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end sm:gap-4 pt-4 border-t",children:[e.jsx(se,{href:"/products",className:"w-full sm:w-auto",children:e.jsx(o,{variant:"outline",type:"button",className:"w-full sm:w-auto",children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:b,className:"w-full sm:w-auto",children:b?e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),m?"Update Product":"Create Product"]})})]})]})]})]})}const Ns=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));function ls(){const s=Ae().props,m=s.existingCategories||[],f=s.existingBrands||[];return e.jsx(pe,{isEditing:!1,existingCategories:m,existingBrands:f})}const ps=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"}));function rs(){const{product:s,existingCategories:m,existingBrands:f}=Ae().props;return e.jsx(pe,{product:s,isEditing:!0,existingCategories:m||[],existingBrands:f||[]})}const vs=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"})),is=({isOpen:s,onClose:m,products:f,onRestock:y})=>{const[j,a]=u.useState(new Set),[_,c]=u.useState([]),[N,b]=u.useState(""),[p,l]=u.useState(!1),[v,x]=u.useState(""),[n,w]=u.useState("all"),[g,h]=u.useState("all");u.useEffect(()=>{s&&(a(new Set),c([]),b(""),x(""),w("all"),h("all"))},[s]);const k=u.useMemo(()=>f.filter(i=>{const I=i.name.toLowerCase().includes(v.toLowerCase())||i.category.toLowerCase().includes(v.toLowerCase())||i.sku?.toLowerCase().includes(v.toLowerCase()),D=n==="all"||i.category===n,A=g==="all"?!0:g==="out_of_stock"?i.quantity===0:g==="low_stock"?i.quantity>0&&i.quantity<=i.low_stock_threshold:g==="in_stock"?i.quantity>i.low_stock_threshold:!0;return I&&D&&A}),[f,v,n,g]),q=u.useMemo(()=>[...new Set(f.map(I=>I.category))].sort(),[f]);u.useEffect(()=>{const i=Array.from(j).map(I=>{const D=_.find(T=>T.product_id===I),A=f.find(T=>T.id===I);return{product_id:I,new_quantity:D?.new_quantity||A?.quantity||0,reason:D?.reason||N}});c(i)},[j,N,f]);const t=(i,I)=>{const D=new Set(j);I?D.add(i):D.delete(i),a(D)},d=(i,I)=>{c(D=>D.map(A=>A.product_id===i?{...A,reason:I}:A))},S=(i,I)=>{c(D=>D.map(A=>{if(A.product_id===i){const T=Math.max(0,A.new_quantity+I);return{...A,new_quantity:T}}return A}))},E=(i,I)=>{const D=parseInt(I)||0;c(A=>A.map(T=>T.product_id===i?{...T,new_quantity:Math.max(0,D)}:T))},z=i=>i.quantity===0?{status:"Out of Stock",color:"destructive"}:i.quantity<=i.low_stock_threshold?{status:"Low Stock",color:"secondary"}:{status:"In Stock",color:"default"},ae=async()=>{if(j.size!==0){l(!0);try{await y(_),m()}catch(i){console.error("Restock failed:",i)}finally{l(!1)}}},$=k.filter(i=>j.has(i.id));return e.jsx(Me,{open:s,onOpenChange:m,children:e.jsxs(Fe,{className:"max-w-6xl max-h-[95vh] overflow-y-auto w-[95vw] sm:w-full mx-2 sm:mx-0 p-2 sm:p-6",children:[e.jsx(Pe,{className:"pb-4",children:e.jsxs(qe,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(ee,{className:"h-5 w-5"}),e.jsx("span",{className:"truncate",children:"Bulk Restock Products"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(M,{htmlFor:"search",className:"text-sm font-medium",children:"Search Products"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(P,{id:"search",placeholder:"Search by name, category, or SKU...",value:v,onChange:i=>x(i.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(M,{htmlFor:"category",className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{id:"category",value:n,onChange:i=>w(i.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),q.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx(M,{htmlFor:"stock",className:"text-sm font-medium",children:"Stock Status"}),e.jsxs("select",{id:"stock",value:g,onChange:i=>h(i.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Stock Levels"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"in_stock",children:"In Stock"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[k.length," products found â€¢ ",j.size," selected"]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{j.size===k.length?a(new Set):a(new Set(k.map(i=>i.id)))},children:j.size===k.length?"Deselect All":"Select All"})]})]}),e.jsx("div",{className:"border rounded-lg max-h-60 sm:max-h-80 overflow-y-auto",children:k.length===0?e.jsxs("div",{className:"p-4 sm:p-8 text-center text-gray-500",children:[e.jsx(ee,{className:"h-8 w-8 sm:h-12 sm:w-12 mx-auto mb-2 sm:mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm sm:text-base",children:"No products found matching your search criteria"})]}):e.jsx("div",{className:"divide-y",children:k.map(i=>{const I=z(i),D=j.has(i.id);return e.jsx("div",{className:`p-3 sm:p-4 hover:bg-gray-50 transition-colors cursor-pointer ${D?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>t(i.id,!D),children:e.jsxs("div",{className:"flex items-start sm:items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),e.jsx(R,{variant:I.color,className:"text-xs w-fit",children:I.status})]}),e.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:i.category}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:["SKU: ",i.sku||"N/A"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:["Current: ",i.quantity]})]})]}),D&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-5 w-5 sm:h-6 sm:w-6 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(Ge,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})})})]})},i.id)})})}),e.jsxs("div",{children:[e.jsx(M,{htmlFor:"global-reason",className:"text-base font-medium",children:"Global Restock Reason (Optional)"}),e.jsx(Ne,{id:"global-reason",placeholder:"e.g., Seasonal restock, supplier delivery, emergency restock...",value:N,onChange:i=>b(i.target.value),className:"mt-2",rows:2})]}),$.length>0&&e.jsxs("div",{children:[e.jsx(M,{className:"text-base font-medium mb-3 block",children:"Set Quantities for Selected Products"}),e.jsx("div",{className:"space-y-3 sm:space-y-4 max-h-60 sm:max-h-80 overflow-y-auto border rounded-lg p-3 sm:p-4",children:$.map(i=>{const I=_.find(A=>A.product_id===i.id),D=I?.new_quantity||i.quantity;return e.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-0 mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("span",{className:"block sm:inline",children:i.category}),e.jsx("span",{className:"hidden sm:inline",children:" â€¢ "}),e.jsxs("span",{className:"block sm:inline",children:["SKU: ",i.sku||"N/A"]}),e.jsx("span",{className:"hidden sm:inline",children:" â€¢ "}),e.jsxs("span",{className:"block sm:inline",children:["Current: ",i.quantity]})]})]}),e.jsx(R,{variant:z(i).color,className:"text-xs w-fit",children:z(i).status})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(M,{htmlFor:`quantity-${i.id}`,className:"text-sm font-medium",children:"New Quantity"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>S(i.id,-1),className:"h-8 w-8 p-0 touch-manipulation",children:e.jsx(We,{className:"h-3 w-3"})}),e.jsx(P,{id:`quantity-${i.id}`,type:"number",min:"0",value:D,onChange:A=>E(i.id,A.target.value),className:"w-16 sm:w-20 text-center"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>S(i.id,1),className:"h-8 w-8 p-0 touch-manipulation",children:e.jsx(re,{className:"h-3 w-3"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Change: ",D>i.quantity?"+":"",D-i.quantity]})]}),e.jsxs("div",{children:[e.jsx(M,{htmlFor:`reason-${i.id}`,className:"text-sm font-medium",children:"Reason (Optional)"}),e.jsx(P,{id:`reason-${i.id}`,placeholder:"e.g., Supplier delivery",value:I?.reason||"",onChange:A=>d(i.id,A.target.value),className:"mt-1"})]}),e.jsx("div",{className:"flex items-center justify-center lg:justify-start",children:e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[D>i.quantity?"+":"",D-i.quantity]}),e.jsx("p",{className:"text-xs text-gray-500",children:"items to add"})]})})]})]},i.id)})})]}),$.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Restock Summary"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Products:"}),e.jsx("span",{className:"ml-1 font-medium",children:$.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Total Items to Add:"}),e.jsx("span",{className:"ml-1 font-medium",children:$.reduce((i,I)=>{const A=_.find(T=>T.product_id===I.id)?.new_quantity||I.quantity;return i+Math.max(0,A-I.quantity)},0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Out of Stock:"}),e.jsx("span",{className:"ml-1 font-medium",children:$.filter(i=>i.quantity===0).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Low Stock:"}),e.jsx("span",{className:"ml-1 font-medium",children:$.filter(i=>i.quantity>0&&i.quantity<=i.low_stock_threshold).length})]})]})]})]}),e.jsxs(Ee,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(o,{variant:"outline",onClick:m,disabled:p,className:"w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),e.jsx(o,{onClick:ae,disabled:j.size===0||p,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 order-1 sm:order-2",children:p?"Restocking...":`Restock ${j.size} Products`})]})]})})},ns=({productId:s,currentQuantity:m,onSave:f,onCancel:y,isEditing:j,onEdit:a})=>{const[_,c]=u.useState(m),[N,b]=u.useState(!1),p=async()=>{if(_===m){y();return}b(!0);try{await f(s,_)}catch(x){console.error("Failed to update quantity:",x),c(m)}finally{b(!1)}},l=()=>{c(m),y()},v=x=>{x.key==="Enter"?p():x.key==="Escape"&&l()};return j?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{type:"number",min:"0",value:_,onChange:x=>c(parseInt(x.target.value)||0),onKeyDown:v,className:"w-20 h-8 text-sm",autoFocus:!0}),e.jsx(o,{size:"sm",variant:"ghost",onClick:p,disabled:N,className:"h-8 w-8 p-0 text-green-600 hover:text-green-700 hover:bg-green-50",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:l,disabled:N,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ce,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium min-w-[3rem]",children:m}),e.jsx(o,{size:"sm",variant:"ghost",onClick:a,className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(ee,{className:"h-4 w-4"})})]})},cs=({product:s,onRestock:m})=>{const[f,y]=u.useState(!1),[j,a]=u.useState(s.quantity),[_,c]=u.useState(""),[N,b]=u.useState(!1),p=()=>s.quantity===0?{status:"Out of Stock",color:"destructive",priority:"high"}:s.quantity<=s.low_stock_threshold?{status:"Low Stock",color:"secondary",priority:"medium"}:{status:"In Stock",color:"default",priority:"low"},l=()=>s.quantity===0?s.low_stock_threshold*3:s.quantity<=s.low_stock_threshold?s.low_stock_threshold*2:s.quantity+s.low_stock_threshold,v=()=>{const k=p();return k.priority==="high"?{text:"Restock",variant:"destructive",icon:ne,className:"bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 h-8"}:k.priority==="medium"?{text:"Restock",variant:"secondary",icon:ee,className:"bg-yellow-600 hover:bg-yellow-700 text-white text-xs px-2 py-1 h-8"}:{text:"Restock",variant:"outline",icon:ee,className:"border-blue-600 text-blue-600 hover:bg-blue-50 text-xs px-2 py-1 h-8"}},x=async()=>{if(j===s.quantity){y(!1);return}b(!0);try{await m(s.id,j,_),y(!1),a(s.quantity),c("")}catch(k){console.error("Restock failed:",k)}finally{b(!1)}},n=()=>{a(l()),c(""),y(!0)},w=p(),g=v(),h=g.icon;return e.jsxs(e.Fragment,{children:[e.jsxs(o,{size:"sm",variant:g.variant,onClick:n,className:g.className,children:[e.jsx(h,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:g.text})]}),e.jsx(Me,{open:f,onOpenChange:y,children:e.jsxs(Fe,{className:"max-w-md",children:[e.jsx(Pe,{children:e.jsxs(qe,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),g.text]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(R,{variant:w.color,children:w.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.category}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",s.quantity," | Threshold: ",s.low_stock_threshold]})]}),e.jsxs("div",{children:[e.jsx(M,{htmlFor:"quantity",className:"text-sm font-medium",children:"New Quantity"}),e.jsx(P,{id:"quantity",type:"number",min:"0",value:j,onChange:k=>a(parseInt(k.target.value)||0),className:"mt-1"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Suggested: ",l()]})]}),e.jsxs("div",{children:[e.jsx(M,{htmlFor:"reason",className:"text-sm font-medium",children:"Restock Reason (Optional)"}),e.jsx(Ne,{id:"reason",placeholder:"e.g., Supplier delivery, seasonal restock, emergency restock...",value:_,onChange:k=>c(k.target.value),className:"mt-1",rows:2})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"Restock Summary"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsxs("p",{children:["Quantity Change: ",s.quantity," â†’ ",j]}),e.jsxs("p",{children:["Difference: ",j>s.quantity?"+":"",j-s.quantity]}),j>s.quantity&&e.jsxs("p",{children:["Inventory Value: +Ksh ",((j-s.quantity)*s.cost_price).toLocaleString()]})]})]})]}),e.jsxs(Ee,{children:[e.jsx(o,{variant:"outline",onClick:()=>y(!1),disabled:N,children:"Cancel"}),e.jsx(o,{onClick:x,disabled:j===s.quantity||N,className:"bg-blue-600 hover:bg-blue-700",children:N?"Restocking...":"Confirm Restock"})]})]})})]})},ds=[{title:"Dashboard",href:"/dashboard"},{title:"Products",href:"/products"}],ke=s=>s.quantity===0?{status:"Out of Stock",color:"destructive"}:s.quantity<=s.low_stock_threshold?{status:"Low Stock",color:"secondary"}:{status:"In Stock",color:"default"},Se=s=>s.discount_price??s.selling_price,Ce=s=>!!(s.discount_price&&s.discount_price<s.selling_price);function os({products:s,categories:m,brands:f,filters:y,flash:j}){const[a,_]=u.useState(y.search||""),[c,N]=u.useState(y.category||""),[b,p]=u.useState(y.brand||""),[l,v]=u.useState(y.stock_filter||""),[x,n]=u.useState(y.price_min||""),[w,g]=u.useState(y.price_max||""),[h,k]=u.useState(y.sort_by||"created_at"),[q,t]=u.useState(y.sort_direction||"desc"),[d,S]=u.useState(y.per_page||"20"),[E,z]=u.useState(!1),[ae,$]=u.useState(null),i=r=>{_(r),te({search:r})},I=r=>{N(r),te({category:r!=="all"?r:""})},D=r=>{p(r),te({brand:r!=="all"?r:""})},A=r=>{v(r),te({stock_filter:r})},T=r=>{const F=h===r&&q==="asc"?"desc":"asc";k(r),t(F),te({sort_by:r,sort_direction:F})},Te=r=>{S(r),te({per_page:r})},te=r=>{const F={search:a,category:c,brand:b,stock_filter:l,price_min:x,price_max:w,sort_by:h,sort_direction:q,per_page:d,...r};U.get("/products",F,{preserveState:!0,preserveScroll:!0})},ve=r=>{confirm("Are you sure you want to delete this product? This action cannot be undone.")&&U.delete(`/products/${r}`,{onSuccess:()=>{},onError:F=>{console.error("Delete failed:",F)}})},Oe=async r=>{try{await U.post("/restock",{items:r},{onSuccess:()=>{z(!1)}})}catch(F){console.error("Bulk restock failed:",F)}},Re=async(r,F)=>{try{await U.post("/restock",{items:[{product_id:r,new_quantity:F}]},{onSuccess:()=>{$(null)}})}catch(L){console.error("Inline restock failed:",L)}},Le=async(r,F,L)=>{try{await U.post("/restock",{items:[{product_id:r,new_quantity:F,reason:L}]})}catch(H){console.error("Quick restock failed:",H)}},le=r=>{const F={search:a,category:c,brand:b,stock_filter:l,price_min:x,price_max:w,sort_by:h,sort_direction:q,per_page:d,page:r};U.get("/products",F,{preserveState:!0,preserveScroll:!0})};return e.jsxs(he,{breadcrumbs:ds,children:[e.jsx(me,{title:"Products"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-3 sm:gap-4 rounded-xl p-2 sm:p-4 pb-20 sm:pb-4",children:[j?.success&&e.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:j.success})})]})}),j?.error&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:j.error})})]})}),e.jsx("div",{className:"sm:hidden",children:e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm",children:e.jsx(Z,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Products"}),e.jsxs("p",{className:"text-sm text-blue-100",children:[s.total," items"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>z(!0),className:"bg-white/20 hover:bg-white/30 text-white border-0",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(se,{href:"/products/create",children:e.jsx(o,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-0",children:e.jsx(re,{className:"h-5 w-5"})})})]})]})}),e.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Products"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your product inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(o,{variant:"outline",onClick:()=>z(!0),className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Bulk Restock"]}),e.jsx(se,{href:"/products/create",children:e.jsxs(o,{children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Add Product"]})})]})]}),e.jsxs(B,{children:[e.jsxs(Y,{className:"pb-3 sm:pb-6",children:[e.jsx(X,{className:"hidden sm:block",children:"Product Inventory"}),e.jsxs("div",{className:"sm:hidden space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(P,{placeholder:"Search products...",value:a,onChange:r=>i(r.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs(W,{value:l||"all",onValueChange:r=>A(r==="all"?"":r),children:[e.jsx(K,{className:"flex-1",children:e.jsx(V,{placeholder:"Filter by stock"})}),e.jsxs(J,{children:[e.jsx(C,{value:"all",children:"All Products"}),e.jsx(C,{value:"low_stock",children:"Low Stock"}),e.jsx(C,{value:"out_of_stock",children:"Out of Stock"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:"Sort:"}),e.jsxs(W,{value:h,onValueChange:T,children:[e.jsx(K,{className:"flex-1",children:e.jsx(V,{})}),e.jsxs(J,{children:[e.jsx(C,{value:"created_at",children:"Newest First"}),e.jsx(C,{value:"name",children:"Name A-Z"}),e.jsx(C,{value:"category",children:"Category"}),e.jsx(C,{value:"price",children:"Price"})]})]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>T(h),className:"px-2",children:q==="asc"?"â†‘":"â†“"})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(P,{placeholder:"Search products...",value:a,onChange:r=>i(r.target.value),className:"max-w-sm pl-10"})]}),e.jsxs(W,{value:c||"all",onValueChange:I,children:[e.jsx(K,{className:"w-40",children:e.jsx(V,{placeholder:"Category"})}),e.jsxs(J,{children:[e.jsx(C,{value:"all",children:"All Categories"}),m.map(r=>e.jsx(C,{value:r,children:r},r))]})]}),e.jsxs(W,{value:b||"all",onValueChange:D,children:[e.jsx(K,{className:"w-40",children:e.jsx(V,{placeholder:"Brand"})}),e.jsxs(J,{children:[e.jsx(C,{value:"all",children:"All Brands"}),f.map(r=>e.jsx(C,{value:r,children:r},r))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(o,{variant:l===""?"default":"outline",size:"sm",onClick:()=>A(""),children:"All"}),e.jsx(o,{variant:l==="low_stock"?"default":"outline",size:"sm",onClick:()=>A("low_stock"),children:"Low Stock"}),e.jsx(o,{variant:l==="out_of_stock"?"default":"outline",size:"sm",onClick:()=>A("out_of_stock"),children:"Out of Stock"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Sort by:"}),e.jsxs(W,{value:h,onValueChange:T,children:[e.jsx(K,{className:"w-32",children:e.jsx(V,{})}),e.jsxs(J,{children:[e.jsx(C,{value:"created_at",children:"Date Added"}),e.jsx(C,{value:"name",children:"Name"}),e.jsx(C,{value:"category",children:"Category"}),e.jsx(C,{value:"brand",children:"Brand"}),e.jsx(C,{value:"price",children:"Price"}),e.jsx(C,{value:"quantity",children:"Stock"})]})]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>T(h),className:"px-2",children:q==="asc"?"â†‘":"â†“"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Show:"}),e.jsxs(W,{value:d,onValueChange:Te,children:[e.jsx(K,{className:"w-20",children:e.jsx(V,{})}),e.jsxs(J,{children:[e.jsx(C,{value:"10",children:"10"}),e.jsx(C,{value:"20",children:"20"}),e.jsx(C,{value:"50",children:"50"}),e.jsx(C,{value:"100",children:"100"})]})]})]})]})]}),e.jsxs(Q,{className:"p-3 sm:p-6",children:[e.jsx("div",{className:"sm:hidden space-y-3",children:s.data.map(r=>{const F=ke(r),L=Se(r),H=Ce(r);return e.jsx(B,{className:"overflow-hidden",children:e.jsx(Q,{className:"p-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:r.image_url?e.jsx("img",{src:r.image_url,alt:r.name,className:"h-16 w-16 rounded-lg border object-cover",onError:ue=>{ue.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0NCA4OS41NDQ0IDgwIDEwMCA4MEMxMTAuNDU2IDgwIDEyMCA4OS41NDQ0IDEyMCAxMEMxMjAgMTEwLjQ1NiAxMTAuNDU2IDEyMCAxMDAgMTIwQzg5LjU0NDQgMTIwIDgwIDExMC40NTYgODAgMTAwWiIgZmlsbD0iI0QxRDVFM0EiLz4KPC9zdmc+"}}):e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-lg bg-muted",children:e.jsx(Z,{className:"h-8 w-8 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm truncate",children:r.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:r.category}),r.brand&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.brand})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["SKU: ",r.sku]})]}),e.jsx(R,{variant:F.color,className:"ml-2 text-xs",children:F.status})]}),e.jsx("div",{className:"mt-2 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:H?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"line-through text-muted-foreground",children:O(r.selling_price)}),e.jsx("span",{className:"ml-2 text-green-600",children:O(L)})]}):O(L)})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Stock:"}),e.jsx("span",{className:"font-medium",children:r.quantity}),r.quantity>0&&r.quantity<=r.low_stock_threshold&&e.jsx(ne,{className:"h-3 w-3 text-amber-500"})]})]})}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(cs,{product:r,onRestock:Le}),e.jsx(R,{variant:F.color,className:"text-xs",children:F.status})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{href:`/products/${r.id}/edit`,className:"flex-1",children:e.jsxs(o,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Edit"]})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>ve(r.id),className:"text-destructive hover:text-destructive",children:e.jsx(be,{className:"h-4 w-4"})})]})]})]})]})})},r.id)})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-2 text-left font-medium",children:"Image"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Name"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Category"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Brand"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"SKU"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Price"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Stock"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Status"}),e.jsx("th",{className:"p-2 text-left font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:s.data.map(r=>{const F=ke(r),L=Se(r),H=Ce(r);return e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[e.jsx("td",{className:"p-2",children:r.image_url?e.jsx("img",{src:r.image_url,alt:r.name,className:"h-12 w-12 rounded-md border object-cover",onError:ue=>{ue.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0NCA4OS41NDQ0IDgwIDEwMCA4MEMxMTAuNDU2IDgwIDEyMCA4OS41NDQ0IDEyMCAxMEMxMjAgMTEwLjQ1NiAxMTAuNDU2IDEyMCAxMDAgMTIwQzg5LjU0NDQgMTIwIDgwIDExMC40NTYgODAgMTAwWiIgZmlsbD0iI0QxRDVFM0EiLz4KPC9zdmc+"}}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-muted",children:e.jsx(Z,{className:"h-6 w-6 text-muted-foreground"})})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),r.description&&e.jsx("div",{className:"max-w-xs truncate text-xs text-muted-foreground",children:r.description})]})}),e.jsx("td",{className:"p-2 text-sm",children:r.category}),e.jsx("td",{className:"p-2 text-sm",children:r.brand||"-"}),e.jsx("td",{className:"p-2 text-sm font-mono",children:r.sku}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"text-sm",children:H?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"line-through text-muted-foreground",children:O(r.selling_price)}),e.jsx("div",{className:"text-green-600 font-medium",children:O(L)})]}):O(L)})}),e.jsx("td",{className:"p-2",children:e.jsx(ns,{productId:r.id,currentQuantity:r.quantity,onSave:Re,onCancel:()=>$(null),isEditing:ae===r.id,onEdit:()=>$(r.id)})}),e.jsx("td",{className:"p-2",children:e.jsx(R,{variant:F.color,children:F.status})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{href:`/products/${r.id}/edit`,children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>ve(r.id),className:"text-destructive hover:text-destructive",children:e.jsx(be,{className:"h-4 w-4"})})]})})]},r.id)})})]})}),s.data.length===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(Z,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No products found."})]}),s.last_page>1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sm:hidden mt-4 space-y-3",children:[e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Showing ",s.from||0," to ",s.to||0," of ",s.total," results"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>le(s.current_page-1),disabled:s.current_page===1,className:"px-3",children:"â†"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(3,s.last_page)},(r,F)=>{const H=Math.max(1,s.current_page-1)+F;return H>s.last_page?null:e.jsx(o,{variant:H===s.current_page?"default":"outline",size:"sm",onClick:()=>le(H),className:"w-10 h-8 p-0",children:H},H)})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>le(s.current_page+1),disabled:s.current_page===s.last_page,className:"px-3",children:"â†’"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Page ",s.current_page," of ",s.last_page]})})]}),e.jsxs("div",{className:"hidden sm:flex mt-6 items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s.from||0," to ",s.to||0," of ",s.total," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>le(s.current_page-1),disabled:s.current_page===1,children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,s.last_page)},(r,F)=>{const L=F+1;return e.jsx(o,{variant:L===s.current_page?"default":"outline",size:"sm",onClick:()=>le(L),children:L},L)})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>le(s.current_page+1),disabled:s.current_page===s.last_page,children:"Next"})]})]})]})]})]})]}),e.jsx(is,{isOpen:E,onClose:()=>z(!1),products:s.data,onRestock:Oe})]})}const ys=Object.freeze(Object.defineProperty({__proto__:null,default:os},Symbol.toStringTag,{value:"Module"})),ms=[{title:"Dashboard",href:"/dashboard"},{title:"Products",href:"/products"},{title:"Product Details",href:"#"}];function xs({product:s}){const{addToCart:m}=Ke(),[f,y]=u.useState(null),[j,a]=u.useState(1),[_,c]=u.useState(!1),N=async n=>{if(!n.is_active||n.quantity<=0){alert("This variant is not available for purchase.");return}c(!0);try{m({product_name:s.name,quantity:j,unit_price:n.discount_price||n.selling_price,product_id:s.id}),alert("Product added to cart successfully!")}catch(w){console.error("Error adding to cart:",w),alert("Failed to add product to cart. Please try again.")}finally{c(!1)}},b=(n,w)=>n===0?{status:"Out of Stock",color:"destructive"}:n<=w?{status:"Low Stock",color:"secondary"}:{status:"In Stock",color:"default"},p=n=>[...new Set(n.filter(w=>w.is_active&&w.quantity>0).map(w=>w.color).filter(Boolean))],l=n=>({red:"#ef4444",blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",purple:"#8b5cf6",pink:"#ec4899",orange:"#f97316",brown:"#a16207",black:"#000000",white:"#ffffff",gray:"#6b7280"})[n.toLowerCase()]||"#6b7280",v=p(s.variants),x=s.variants.filter(n=>n.is_active);return e.jsxs(he,{breadcrumbs:ms,children:[e.jsx(me,{title:s.name}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4 md:p-6 pb-20 sm:pb-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(se,{href:"/dashboard",children:e.jsx(o,{variant:"outline",size:"icon",className:"h-10 w-10",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:s.name}),e.jsx("p",{className:"text-muted-foreground",children:"Product Details"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(se,{href:`/products/${s.id}/edit`,children:e.jsxs(o,{variant:"outline",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Edit Product"]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(B,{className:"border-0 shadow-sm",children:e.jsxs(Q,{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"h-64 w-full rounded-lg border object-cover md:h-96",onError:n=>{n.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0NCA4OS41NDQ0IDgwIDEwMCA4MEMxMTAuNDU2IDgwIDEyMCA4OS41NDQ0IDEyMCAxMEMxMjAgMTEwLjQ1NiAxMTAuNDU2IDEyMCAxMDAgMTIwQzg5LjU0NDQgMTIwIDgwIDExMC40NTYgODAgMTAwWiIgZmlsbD0iI0QxRDVFM0EiLz4KPC9zdmc+"}}):e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-lg bg-muted md:h-96",children:e.jsx(Z,{className:"h-24 w-24 text-muted-foreground"})})}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx(R,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x.length," variants"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.brand&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Brand"}),e.jsx("span",{className:"text-sm",children:s.brand})]}),s.category&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("span",{className:"text-sm",children:s.category})]})]})]})})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.description&&e.jsxs(B,{className:"border-0 shadow-sm",children:[e.jsx(Y,{children:e.jsx(X,{className:"text-lg",children:"Description"})}),e.jsx(Q,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]}),s.features&&s.features.length>0&&e.jsxs(B,{className:"border-0 shadow-sm",children:[e.jsx(Y,{children:e.jsx(X,{className:"text-lg",children:"Features"})}),e.jsx(Q,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.map((n,w)=>e.jsx(R,{variant:"outline",className:"px-3 py-1",children:n},w))})})]}),e.jsxs(B,{className:"border-0 shadow-sm",children:[e.jsxs(Y,{children:[e.jsx(X,{className:"text-lg",children:"Available Variants"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a variant to add to cart"})]}),e.jsx(Q,{children:x.length>0?e.jsx("div",{className:"space-y-4",children:x.map(n=>{const w=b(n.quantity,n.low_stock_threshold),g=f?.id===n.id,h=n.quantity>0;return e.jsxs("div",{className:`rounded-lg border p-4 transition-all duration-200 ${g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"} ${h?"cursor-pointer":"opacity-50"}`,onClick:()=>h&&y(n),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[n.color&&e.jsx("div",{className:"h-4 w-4 rounded-full border shadow-sm",style:{backgroundColor:l(n.color)},title:n.color}),e.jsxs("span",{className:"font-medium",children:[n.color&&`${n.color}`,n.size&&` - ${n.size}`]}),e.jsx(R,{variant:"outline",className:"text-xs",children:n.sku})]}),e.jsxs("div",{className:"mb-3 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Stock: ",n.quantity]}),e.jsx(R,{variant:w.color,children:w.status})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:n.discount_price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"line-through text-muted-foreground",children:O(n.selling_price)}),e.jsx("span",{children:O(n.discount_price)})]}):O(n.selling_price)}),n.discount_price&&e.jsxs(R,{variant:"destructive",className:"text-xs",children:[Math.round((n.selling_price-n.discount_price)/n.selling_price*100),"% OFF"]})]})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:n.image_url&&e.jsx("img",{src:n.image_url,alt:`${s.name} - ${n.color} ${n.size}`,className:"h-16 w-16 rounded-lg object-cover"})})]}),g&&h&&e.jsx("div",{className:"mt-4 border-t pt-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:`quantity-${n.id}`,className:"text-sm font-medium",children:"Quantity:"}),e.jsx("input",{id:`quantity-${n.id}`,type:"number",min:"1",max:n.quantity,value:j,onChange:k=>a(Math.max(1,parseInt(k.target.value)||1)),className:"h-8 w-16 rounded border px-2 text-sm"})]}),e.jsxs(o,{onClick:()=>N(n),disabled:_,className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800",children:[_?e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Add to Cart"]})]})})]},n.id)})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Z,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{children:"No active variants available"})]})})]}),v.length>0&&e.jsxs(B,{className:"border-0 shadow-sm",children:[e.jsx(Y,{children:e.jsx(X,{className:"text-lg",children:"Available Colors"})}),e.jsx(Q,{children:e.jsx("div",{className:"flex flex-wrap gap-3",children:v.map(n=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-6 w-6 rounded-full border shadow-sm",style:{backgroundColor:l(n||"")}}),e.jsx("span",{className:"text-sm capitalize",children:n})]},n))})})]})]})]})]})]})}const bs=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"}));export{fs as C,vs as E,Ns as F,G as I,ze as S,ps as a,ys as b,bs as c};
